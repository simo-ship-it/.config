var Ao=Object.create;var He=Object.defineProperty,qo=Object.defineProperties,jo=Object.getOwnPropertyDescriptor,Ho=Object.getOwnPropertyDescriptors,Lo=Object.getOwnPropertyNames,an=Object.getOwnPropertySymbols,Io=Object.getPrototypeOf,un=Object.prototype.hasOwnProperty,Do=Object.prototype.propertyIsEnumerable;var cn=(t,e,r)=>e in t?He(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,b=(t,e)=>{for(var r in e||(e={}))un.call(e,r)&&cn(t,r,e[r]);if(an)for(var r of an(e))Do.call(e,r)&&cn(t,r,e[r]);return t},O=(t,e)=>qo(t,Ho(e)),hn=t=>He(t,"__esModule",{value:!0});var v=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Bo=(t,e)=>{for(var r in e)He(t,r,{get:e[r],enumerable:!0})},fn=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of Lo(e))!un.call(t,s)&&(r||s!=="default")&&He(t,s,{get:()=>e[s],enumerable:!(n=jo(e,s))||n.enumerable});return t},I=(t,e)=>fn(hn(He(t!=null?Ao(Io(t)):{},"default",!e&&t&&t.__esModule?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t),No=(t=>(e,r)=>t&&t.get(e)||(r=fn(hn({}),e,1),t&&t.set(e,r),r))(typeof WeakMap!="undefined"?new WeakMap:0);var se=v((ne,ut)=>{"use strict";Object.defineProperty(ne,"__esModule",{value:!0});var kn=["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function aa(t){return kn.includes(t)}var ca=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","FormData","URLSearchParams","HTMLElement",...kn];function ua(t){return ca.includes(t)}var ha=["null","undefined","string","number","bigint","boolean","symbol"];function fa(t){return ha.includes(t)}function Ee(t){return e=>typeof e===t}var{toString:Pn}=Object.prototype,Ue=t=>{let e=Pn.call(t).slice(8,-1);if(/HTML\w+Element/.test(e)&&u.domElement(t))return"HTMLElement";if(ua(e))return e},P=t=>e=>Ue(e)===t;function u(t){if(t===null)return"null";switch(typeof t){case"undefined":return"undefined";case"string":return"string";case"number":return"number";case"boolean":return"boolean";case"function":return"Function";case"bigint":return"bigint";case"symbol":return"symbol";default:}if(u.observable(t))return"Observable";if(u.array(t))return"Array";if(u.buffer(t))return"Buffer";let e=Ue(t);if(e)return e;if(t instanceof String||t instanceof Boolean||t instanceof Number)throw new TypeError("Please don't use object wrappers for primitive types");return"Object"}u.undefined=Ee("undefined");u.string=Ee("string");var da=Ee("number");u.number=t=>da(t)&&!u.nan(t);u.bigint=Ee("bigint");u.function_=Ee("function");u.null_=t=>t===null;u.class_=t=>u.function_(t)&&t.toString().startsWith("class ");u.boolean=t=>t===!0||t===!1;u.symbol=Ee("symbol");u.numericString=t=>u.string(t)&&!u.emptyStringOrWhitespace(t)&&!Number.isNaN(Number(t));u.array=(t,e)=>Array.isArray(t)?u.function_(e)?t.every(e):!0:!1;u.buffer=t=>{var e,r,n,s;return(s=(n=(r=(e=t)===null||e===void 0?void 0:e.constructor)===null||r===void 0?void 0:r.isBuffer)===null||n===void 0?void 0:n.call(r,t))!==null&&s!==void 0?s:!1};u.nullOrUndefined=t=>u.null_(t)||u.undefined(t);u.object=t=>!u.null_(t)&&(typeof t=="object"||u.function_(t));u.iterable=t=>{var e;return u.function_((e=t)===null||e===void 0?void 0:e[Symbol.iterator])};u.asyncIterable=t=>{var e;return u.function_((e=t)===null||e===void 0?void 0:e[Symbol.asyncIterator])};u.generator=t=>{var e,r;return u.iterable(t)&&u.function_((e=t)===null||e===void 0?void 0:e.next)&&u.function_((r=t)===null||r===void 0?void 0:r.throw)};u.asyncGenerator=t=>u.asyncIterable(t)&&u.function_(t.next)&&u.function_(t.throw);u.nativePromise=t=>P("Promise")(t);var la=t=>{var e,r;return u.function_((e=t)===null||e===void 0?void 0:e.then)&&u.function_((r=t)===null||r===void 0?void 0:r.catch)};u.promise=t=>u.nativePromise(t)||la(t);u.generatorFunction=P("GeneratorFunction");u.asyncGeneratorFunction=t=>Ue(t)==="AsyncGeneratorFunction";u.asyncFunction=t=>Ue(t)==="AsyncFunction";u.boundFunction=t=>u.function_(t)&&!t.hasOwnProperty("prototype");u.regExp=P("RegExp");u.date=P("Date");u.error=P("Error");u.map=t=>P("Map")(t);u.set=t=>P("Set")(t);u.weakMap=t=>P("WeakMap")(t);u.weakSet=t=>P("WeakSet")(t);u.int8Array=P("Int8Array");u.uint8Array=P("Uint8Array");u.uint8ClampedArray=P("Uint8ClampedArray");u.int16Array=P("Int16Array");u.uint16Array=P("Uint16Array");u.int32Array=P("Int32Array");u.uint32Array=P("Uint32Array");u.float32Array=P("Float32Array");u.float64Array=P("Float64Array");u.bigInt64Array=P("BigInt64Array");u.bigUint64Array=P("BigUint64Array");u.arrayBuffer=P("ArrayBuffer");u.sharedArrayBuffer=P("SharedArrayBuffer");u.dataView=P("DataView");u.enumCase=(t,e)=>Object.values(e).includes(t);u.directInstanceOf=(t,e)=>Object.getPrototypeOf(t)===e.prototype;u.urlInstance=t=>P("URL")(t);u.urlString=t=>{if(!u.string(t))return!1;try{return new URL(t),!0}catch{return!1}};u.truthy=t=>Boolean(t);u.falsy=t=>!t;u.nan=t=>Number.isNaN(t);u.primitive=t=>u.null_(t)||fa(typeof t);u.integer=t=>Number.isInteger(t);u.safeInteger=t=>Number.isSafeInteger(t);u.plainObject=t=>{if(Pn.call(t)!=="[object Object]")return!1;let e=Object.getPrototypeOf(t);return e===null||e===Object.getPrototypeOf({})};u.typedArray=t=>aa(Ue(t));var pa=t=>u.safeInteger(t)&&t>=0;u.arrayLike=t=>!u.nullOrUndefined(t)&&!u.function_(t)&&pa(t.length);u.inRange=(t,e)=>{if(u.number(e))return t>=Math.min(0,e)&&t<=Math.max(e,0);if(u.array(e)&&e.length===2)return t>=Math.min(...e)&&t<=Math.max(...e);throw new TypeError(`Invalid range: ${JSON.stringify(e)}`)};var ma=1,ya=["innerHTML","ownerDocument","style","attributes","nodeValue"];u.domElement=t=>u.object(t)&&t.nodeType===ma&&u.string(t.nodeName)&&!u.plainObject(t)&&ya.every(e=>e in t);u.observable=t=>{var e,r,n,s;return t?t===((r=(e=t)[Symbol.observable])===null||r===void 0?void 0:r.call(e))||t===((s=(n=t)["@@observable"])===null||s===void 0?void 0:s.call(n)):!1};u.nodeStream=t=>u.object(t)&&u.function_(t.pipe)&&!u.observable(t);u.infinite=t=>t===1/0||t===-1/0;var An=t=>e=>u.integer(e)&&Math.abs(e%2)===t;u.evenInteger=An(0);u.oddInteger=An(1);u.emptyArray=t=>u.array(t)&&t.length===0;u.nonEmptyArray=t=>u.array(t)&&t.length>0;u.emptyString=t=>u.string(t)&&t.length===0;u.nonEmptyString=t=>u.string(t)&&t.length>0;var ga=t=>u.string(t)&&!/\S/.test(t);u.emptyStringOrWhitespace=t=>u.emptyString(t)||ga(t);u.emptyObject=t=>u.object(t)&&!u.map(t)&&!u.set(t)&&Object.keys(t).length===0;u.nonEmptyObject=t=>u.object(t)&&!u.map(t)&&!u.set(t)&&Object.keys(t).length>0;u.emptySet=t=>u.set(t)&&t.size===0;u.nonEmptySet=t=>u.set(t)&&t.size>0;u.emptyMap=t=>u.map(t)&&t.size===0;u.nonEmptyMap=t=>u.map(t)&&t.size>0;u.propertyKey=t=>u.any([u.string,u.number,u.symbol],t);u.formData=t=>P("FormData")(t);u.urlSearchParams=t=>P("URLSearchParams")(t);var qn=(t,e,r)=>{if(!u.function_(e))throw new TypeError(`Invalid predicate: ${JSON.stringify(e)}`);if(r.length===0)throw new TypeError("Invalid number of values");return t.call(r,e)};u.any=(t,...e)=>(u.array(t)?t:[t]).some(n=>qn(Array.prototype.some,n,e));u.all=(t,...e)=>qn(Array.prototype.every,t,e);var g=(t,e,r,n={})=>{if(!t){let{multipleValues:s}=n,i=s?`received values of types ${[...new Set(r.map(o=>`\`${u(o)}\``))].join(", ")}`:`received value of type \`${u(r)}\``;throw new TypeError(`Expected value which is \`${e}\`, ${i}.`)}};ne.assert={undefined:t=>g(u.undefined(t),"undefined",t),string:t=>g(u.string(t),"string",t),number:t=>g(u.number(t),"number",t),bigint:t=>g(u.bigint(t),"bigint",t),function_:t=>g(u.function_(t),"Function",t),null_:t=>g(u.null_(t),"null",t),class_:t=>g(u.class_(t),"Class",t),boolean:t=>g(u.boolean(t),"boolean",t),symbol:t=>g(u.symbol(t),"symbol",t),numericString:t=>g(u.numericString(t),"string with a number",t),array:(t,e)=>{g(u.array(t),"Array",t),e&&t.forEach(e)},buffer:t=>g(u.buffer(t),"Buffer",t),nullOrUndefined:t=>g(u.nullOrUndefined(t),"null or undefined",t),object:t=>g(u.object(t),"Object",t),iterable:t=>g(u.iterable(t),"Iterable",t),asyncIterable:t=>g(u.asyncIterable(t),"AsyncIterable",t),generator:t=>g(u.generator(t),"Generator",t),asyncGenerator:t=>g(u.asyncGenerator(t),"AsyncGenerator",t),nativePromise:t=>g(u.nativePromise(t),"native Promise",t),promise:t=>g(u.promise(t),"Promise",t),generatorFunction:t=>g(u.generatorFunction(t),"GeneratorFunction",t),asyncGeneratorFunction:t=>g(u.asyncGeneratorFunction(t),"AsyncGeneratorFunction",t),asyncFunction:t=>g(u.asyncFunction(t),"AsyncFunction",t),boundFunction:t=>g(u.boundFunction(t),"Function",t),regExp:t=>g(u.regExp(t),"RegExp",t),date:t=>g(u.date(t),"Date",t),error:t=>g(u.error(t),"Error",t),map:t=>g(u.map(t),"Map",t),set:t=>g(u.set(t),"Set",t),weakMap:t=>g(u.weakMap(t),"WeakMap",t),weakSet:t=>g(u.weakSet(t),"WeakSet",t),int8Array:t=>g(u.int8Array(t),"Int8Array",t),uint8Array:t=>g(u.uint8Array(t),"Uint8Array",t),uint8ClampedArray:t=>g(u.uint8ClampedArray(t),"Uint8ClampedArray",t),int16Array:t=>g(u.int16Array(t),"Int16Array",t),uint16Array:t=>g(u.uint16Array(t),"Uint16Array",t),int32Array:t=>g(u.int32Array(t),"Int32Array",t),uint32Array:t=>g(u.uint32Array(t),"Uint32Array",t),float32Array:t=>g(u.float32Array(t),"Float32Array",t),float64Array:t=>g(u.float64Array(t),"Float64Array",t),bigInt64Array:t=>g(u.bigInt64Array(t),"BigInt64Array",t),bigUint64Array:t=>g(u.bigUint64Array(t),"BigUint64Array",t),arrayBuffer:t=>g(u.arrayBuffer(t),"ArrayBuffer",t),sharedArrayBuffer:t=>g(u.sharedArrayBuffer(t),"SharedArrayBuffer",t),dataView:t=>g(u.dataView(t),"DataView",t),enumCase:(t,e)=>g(u.enumCase(t,e),"EnumCase",t),urlInstance:t=>g(u.urlInstance(t),"URL",t),urlString:t=>g(u.urlString(t),"string with a URL",t),truthy:t=>g(u.truthy(t),"truthy",t),falsy:t=>g(u.falsy(t),"falsy",t),nan:t=>g(u.nan(t),"NaN",t),primitive:t=>g(u.primitive(t),"primitive",t),integer:t=>g(u.integer(t),"integer",t),safeInteger:t=>g(u.safeInteger(t),"integer",t),plainObject:t=>g(u.plainObject(t),"plain object",t),typedArray:t=>g(u.typedArray(t),"TypedArray",t),arrayLike:t=>g(u.arrayLike(t),"array-like",t),domElement:t=>g(u.domElement(t),"HTMLElement",t),observable:t=>g(u.observable(t),"Observable",t),nodeStream:t=>g(u.nodeStream(t),"Node.js Stream",t),infinite:t=>g(u.infinite(t),"infinite number",t),emptyArray:t=>g(u.emptyArray(t),"empty array",t),nonEmptyArray:t=>g(u.nonEmptyArray(t),"non-empty array",t),emptyString:t=>g(u.emptyString(t),"empty string",t),nonEmptyString:t=>g(u.nonEmptyString(t),"non-empty string",t),emptyStringOrWhitespace:t=>g(u.emptyStringOrWhitespace(t),"empty string or whitespace",t),emptyObject:t=>g(u.emptyObject(t),"empty object",t),nonEmptyObject:t=>g(u.nonEmptyObject(t),"non-empty object",t),emptySet:t=>g(u.emptySet(t),"empty set",t),nonEmptySet:t=>g(u.nonEmptySet(t),"non-empty set",t),emptyMap:t=>g(u.emptyMap(t),"empty map",t),nonEmptyMap:t=>g(u.nonEmptyMap(t),"non-empty map",t),propertyKey:t=>g(u.propertyKey(t),"PropertyKey",t),formData:t=>g(u.formData(t),"FormData",t),urlSearchParams:t=>g(u.urlSearchParams(t),"URLSearchParams",t),evenInteger:t=>g(u.evenInteger(t),"even integer",t),oddInteger:t=>g(u.oddInteger(t),"odd integer",t),directInstanceOf:(t,e)=>g(u.directInstanceOf(t,e),"T",t),inRange:(t,e)=>g(u.inRange(t,e),"in range",t),any:(t,...e)=>g(u.any(t,...e),"predicate returns truthy for any value",e,{multipleValues:!0}),all:(t,...e)=>g(u.all(t,...e),"predicate returns truthy for all values",e,{multipleValues:!0})};Object.defineProperties(u,{class:{value:u.class_},function:{value:u.function_},null:{value:u.null_}});Object.defineProperties(ne.assert,{class:{value:ne.assert.class_},function:{value:ne.assert.function_},null:{value:ne.assert.null_}});ne.default=u;ut.exports=u;ut.exports.default=u;ut.exports.assert=ne.assert});var Hn=v((rr,nr)=>{"use strict";Object.defineProperty(rr,"__esModule",{value:!0});function ba(t){return t.encrypted}var tr=(t,e)=>{let r;typeof e=="function"?r={connect:e}:r=e;let n=typeof r.connect=="function",s=typeof r.secureConnect=="function",i=typeof r.close=="function",o=()=>{n&&r.connect(),ba(t)&&s&&(t.authorized?r.secureConnect():t.authorizationError||t.once("secureConnect",r.secureConnect)),i&&t.once("close",r.close)};t.writable&&!t.connecting?o():t.connecting?t.once("connect",o):t.destroyed&&i&&r.close(t._hadError)};rr.default=tr;nr.exports=tr;nr.exports.default=tr});var zn=v((qh,Un)=>{"use strict";var Ea="text/plain",va="us-ascii",Nn=(t,e)=>e.some(r=>r instanceof RegExp?r.test(t):r===t),Sa=(t,{stripHash:e})=>{let r=/^data:(?<type>[^,]*?),(?<data>[^#]*?)(?:#(?<hash>.*))?$/.exec(t);if(!r)throw new Error(`Invalid URL: ${t}`);let{type:n,data:s,hash:i}=r.groups,o=n.split(";");i=e?"":i;let a=!1;o[o.length-1]==="base64"&&(o.pop(),a=!0);let h=(o.shift()||"").toLowerCase(),l=[...o.map(m=>{let[p,w=""]=m.split("=").map(S=>S.trim());return p==="charset"&&(w=w.toLowerCase(),w===va)?"":`${p}${w?`=${w}`:""}`}).filter(Boolean)];return a&&l.push("base64"),(l.length!==0||h&&h!==Ea)&&l.unshift(h),`data:${l.join(";")},${a?s.trim():s}${i?`#${i}`:""}`},xa=(t,e)=>{if(e=b({defaultProtocol:"http:",normalizeProtocol:!0,forceHttp:!1,forceHttps:!1,stripAuthentication:!0,stripHash:!1,stripTextFragment:!0,stripWWW:!0,removeQueryParameters:[/^utm_\w+/i],removeTrailingSlash:!0,removeSingleSlash:!0,removeDirectoryIndex:!1,sortQueryParameters:!0},e),t=t.trim(),/^data:/i.test(t))return Sa(t,e);if(/^view-source:/i.test(t))throw new Error("`view-source:` is not supported as it is a non-standard protocol");let r=t.startsWith("//");!r&&/^\.*\//.test(t)||(t=t.replace(/^(?!(?:\w+:)?\/\/)|^\/\//,e.defaultProtocol));let s=new URL(t);if(e.forceHttp&&e.forceHttps)throw new Error("The `forceHttp` and `forceHttps` options cannot be used together");if(e.forceHttp&&s.protocol==="https:"&&(s.protocol="http:"),e.forceHttps&&s.protocol==="http:"&&(s.protocol="https:"),e.stripAuthentication&&(s.username="",s.password=""),e.stripHash?s.hash="":e.stripTextFragment&&(s.hash=s.hash.replace(/#?:~:text.*?$/i,"")),s.pathname&&(s.pathname=s.pathname.replace(/(?<!\b(?:[a-z][a-z\d+\-.]{1,50}:))\/{2,}/g,"/")),s.pathname)try{s.pathname=decodeURI(s.pathname)}catch{}if(e.removeDirectoryIndex===!0&&(e.removeDirectoryIndex=[/^index\.[a-z]+$/]),Array.isArray(e.removeDirectoryIndex)&&e.removeDirectoryIndex.length>0){let o=s.pathname.split("/"),a=o[o.length-1];Nn(a,e.removeDirectoryIndex)&&(o=o.slice(0,o.length-1),s.pathname=o.slice(1).join("/")+"/")}if(s.hostname&&(s.hostname=s.hostname.replace(/\.$/,""),e.stripWWW&&/^www\.(?!www\.)(?:[a-z\-\d]{1,63})\.(?:[a-z.\-\d]{2,63})$/.test(s.hostname)&&(s.hostname=s.hostname.replace(/^www\./,""))),Array.isArray(e.removeQueryParameters))for(let o of[...s.searchParams.keys()])Nn(o,e.removeQueryParameters)&&s.searchParams.delete(o);e.removeQueryParameters===!0&&(s.search=""),e.sortQueryParameters&&s.searchParams.sort(),e.removeTrailingSlash&&(s.pathname=s.pathname.replace(/\/$/,""));let i=t;return t=s.toString(),!e.removeSingleSlash&&s.pathname==="/"&&!i.endsWith("/")&&s.hash===""&&(t=t.replace(/\/$/,"")),(e.removeTrailingSlash||s.pathname==="/")&&s.hash===""&&e.removeSingleSlash&&(t=t.replace(/\/$/,"")),r&&!e.normalizeProtocol&&(t=t.replace(/^http:\/\//,"//")),e.stripProtocol&&(t=t.replace(/^(?:https?:)?\/\//,"")),t};Un.exports=xa});var $n=v((jh,Mn)=>{Mn.exports=Fn;function Fn(t,e){if(t&&e)return Fn(t)(e);if(typeof t!="function")throw new TypeError("need wrapper function");return Object.keys(t).forEach(function(n){r[n]=t[n]}),r;function r(){for(var n=new Array(arguments.length),s=0;s<n.length;s++)n[s]=arguments[s];var i=t.apply(this,n),o=n[n.length-1];return typeof i=="function"&&i!==o&&Object.keys(o).forEach(function(a){i[a]=o[a]}),i}}});var ir=v((Hh,sr)=>{var Vn=$n();sr.exports=Vn(lt);sr.exports.strict=Vn(Wn);lt.proto=lt(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return lt(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return Wn(this)},configurable:!0})});function lt(t){var e=function(){return e.called?e.value:(e.called=!0,e.value=t.apply(this,arguments))};return e.called=!1,e}function Wn(t){var e=function(){if(e.called)throw new Error(e.onceError);return e.called=!0,e.value=t.apply(this,arguments)},r=t.name||"Function wrapped with `once`";return e.onceError=r+" shouldn't be called more than once",e.called=!1,e}});var Kn=v((Lh,Jn)=>{var Ca=ir(),Ta=function(){},Ra=function(t){return t.setHeader&&typeof t.abort=="function"},Oa=function(t){return t.stdio&&Array.isArray(t.stdio)&&t.stdio.length===3},Gn=function(t,e,r){if(typeof e=="function")return Gn(t,null,e);e||(e={}),r=Ca(r||Ta);var n=t._writableState,s=t._readableState,i=e.readable||e.readable!==!1&&t.readable,o=e.writable||e.writable!==!1&&t.writable,a=!1,h=function(){t.writable||f()},f=function(){o=!1,i||r.call(t)},l=function(){i=!1,o||r.call(t)},m=function(y){r.call(t,y?new Error("exited with error code: "+y):null)},p=function(y){r.call(t,y)},w=function(){process.nextTick(S)},S=function(){if(!a){if(i&&!(s&&s.ended&&!s.destroyed))return r.call(t,new Error("premature close"));if(o&&!(n&&n.ended&&!n.destroyed))return r.call(t,new Error("premature close"))}},d=function(){t.req.on("finish",f)};return Ra(t)?(t.on("complete",f),t.on("abort",w),t.req?d():t.on("request",d)):o&&!n&&(t.on("end",h),t.on("close",h)),Oa(t)&&t.on("exit",m),t.on("end",l),t.on("finish",f),e.error!==!1&&t.on("error",p),t.on("close",w),function(){a=!0,t.removeListener("complete",f),t.removeListener("abort",w),t.removeListener("request",d),t.req&&t.req.removeListener("finish",f),t.removeListener("end",h),t.removeListener("close",h),t.removeListener("finish",f),t.removeListener("exit",m),t.removeListener("end",l),t.removeListener("error",p),t.removeListener("close",w)}};Jn.exports=Gn});var Xn=v((Ih,Yn)=>{var ka=ir(),Pa=Kn(),or=require("fs"),ze=function(){},Aa=/^v?\.0/.test(process.version),pt=function(t){return typeof t=="function"},qa=function(t){return!Aa||!or?!1:(t instanceof(or.ReadStream||ze)||t instanceof(or.WriteStream||ze))&&pt(t.close)},ja=function(t){return t.setHeader&&pt(t.abort)},Ha=function(t,e,r,n){n=ka(n);var s=!1;t.on("close",function(){s=!0}),Pa(t,{readable:e,writable:r},function(o){if(o)return n(o);s=!0,n()});var i=!1;return function(o){if(!s&&!i){if(i=!0,qa(t))return t.close(ze);if(ja(t))return t.abort();if(pt(t.destroy))return t.destroy();n(o||new Error("stream was destroyed"))}}},Qn=function(t){t()},La=function(t,e){return t.pipe(e)},Ia=function(){var t=Array.prototype.slice.call(arguments),e=pt(t[t.length-1]||ze)&&t.pop()||ze;if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new Error("pump requires two streams per minimum");var r,n=t.map(function(s,i){var o=i<t.length-1,a=i>0;return Ha(s,o,a,function(h){r||(r=h),h&&n.forEach(Qn),!o&&(n.forEach(Qn),e(r))})});return t.reduce(La)};Yn.exports=Ia});var es=v((Dh,Zn)=>{"use strict";var{PassThrough:Da}=require("stream");Zn.exports=t=>{t=b({},t);let{array:e}=t,{encoding:r}=t,n=r==="buffer",s=!1;e?s=!(r||n):r=r||"utf8",n&&(r=null);let i=new Da({objectMode:s});r&&i.setEncoding(r);let o=0,a=[];return i.on("data",h=>{a.push(h),s?o=a.length:o+=h.length}),i.getBufferedValue=()=>e?a:n?Buffer.concat(a,o):a.join(""),i.getBufferedLength=()=>o,i}});var ts=v((Bh,Se)=>{"use strict";var{constants:Ba}=require("buffer"),Na=Xn(),Ua=es(),ar=class extends Error{constructor(){super("maxBuffer exceeded");this.name="MaxBufferError"}};async function mt(t,e){if(!t)return Promise.reject(new Error("Expected a stream"));e=b({maxBuffer:1/0},e);let{maxBuffer:r}=e,n;return await new Promise((s,i)=>{let o=a=>{a&&n.getBufferedLength()<=Ba.MAX_LENGTH&&(a.bufferedData=n.getBufferedValue()),i(a)};n=Na(t,Ua(e),a=>{if(a){o(a);return}s()}),n.on("data",()=>{n.getBufferedLength()>r&&o(new ar)})}),n.getBufferedValue()}Se.exports=mt;Se.exports.default=mt;Se.exports.buffer=(t,e)=>mt(t,O(b({},e),{encoding:"buffer"}));Se.exports.array=(t,e)=>mt(t,O(b({},e),{array:!0}));Se.exports.MaxBufferError=ar});var ns=v((Uh,rs)=>{"use strict";var za=new Set([200,203,204,206,300,301,404,405,410,414,501]),Fa=new Set([200,203,204,300,301,302,303,307,308,404,405,410,414,501]),Ma=new Set([500,502,503,504]),$a={date:!0,connection:!0,"keep-alive":!0,"proxy-authenticate":!0,"proxy-authorization":!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0},Va={"content-length":!0,"content-encoding":!0,"transfer-encoding":!0,"content-range":!0};function pe(t){let e=parseInt(t,10);return isFinite(e)?e:0}function Wa(t){return t?Ma.has(t.status):!0}function cr(t){let e={};if(!t)return e;let r=t.trim().split(/\s*,\s*/);for(let n of r){let[s,i]=n.split(/\s*=\s*/,2);e[s]=i===void 0?!0:i.replace(/^"|"$/g,"")}return e}function Ga(t){let e=[];for(let r in t){let n=t[r];e.push(n===!0?r:r+"="+n)}if(!!e.length)return e.join(", ")}rs.exports=class{constructor(e,r,{shared:n,cacheHeuristic:s,immutableMinTimeToLive:i,ignoreCargoCult:o,_fromObject:a}={}){if(a){this._fromObject(a);return}if(!r||!r.headers)throw Error("Response headers missing");this._assertRequestHasHeaders(e),this._responseTime=this.now(),this._isShared=n!==!1,this._cacheHeuristic=s!==void 0?s:.1,this._immutableMinTtl=i!==void 0?i:24*3600*1e3,this._status="status"in r?r.status:200,this._resHeaders=r.headers,this._rescc=cr(r.headers["cache-control"]),this._method="method"in e?e.method:"GET",this._url=e.url,this._host=e.headers.host,this._noAuthorization=!e.headers.authorization,this._reqHeaders=r.headers.vary?e.headers:null,this._reqcc=cr(e.headers["cache-control"]),o&&"pre-check"in this._rescc&&"post-check"in this._rescc&&(delete this._rescc["pre-check"],delete this._rescc["post-check"],delete this._rescc["no-cache"],delete this._rescc["no-store"],delete this._rescc["must-revalidate"],this._resHeaders=Object.assign({},this._resHeaders,{"cache-control":Ga(this._rescc)}),delete this._resHeaders.expires,delete this._resHeaders.pragma),r.headers["cache-control"]==null&&/no-cache/.test(r.headers.pragma)&&(this._rescc["no-cache"]=!0)}now(){return Date.now()}storable(){return!!(!this._reqcc["no-store"]&&(this._method==="GET"||this._method==="HEAD"||this._method==="POST"&&this._hasExplicitExpiration())&&Fa.has(this._status)&&!this._rescc["no-store"]&&(!this._isShared||!this._rescc.private)&&(!this._isShared||this._noAuthorization||this._allowsStoringAuthenticated())&&(this._resHeaders.expires||this._rescc["max-age"]||this._isShared&&this._rescc["s-maxage"]||this._rescc.public||za.has(this._status)))}_hasExplicitExpiration(){return this._isShared&&this._rescc["s-maxage"]||this._rescc["max-age"]||this._resHeaders.expires}_assertRequestHasHeaders(e){if(!e||!e.headers)throw Error("Request headers missing")}satisfiesWithoutRevalidation(e){this._assertRequestHasHeaders(e);let r=cr(e.headers["cache-control"]);return r["no-cache"]||/no-cache/.test(e.headers.pragma)||r["max-age"]&&this.age()>r["max-age"]||r["min-fresh"]&&this.timeToLive()<1e3*r["min-fresh"]||this.stale()&&!(r["max-stale"]&&!this._rescc["must-revalidate"]&&(r["max-stale"]===!0||r["max-stale"]>this.age()-this.maxAge()))?!1:this._requestMatches(e,!1)}_requestMatches(e,r){return(!this._url||this._url===e.url)&&this._host===e.headers.host&&(!e.method||this._method===e.method||r&&e.method==="HEAD")&&this._varyMatches(e)}_allowsStoringAuthenticated(){return this._rescc["must-revalidate"]||this._rescc.public||this._rescc["s-maxage"]}_varyMatches(e){if(!this._resHeaders.vary)return!0;if(this._resHeaders.vary==="*")return!1;let r=this._resHeaders.vary.trim().toLowerCase().split(/\s*,\s*/);for(let n of r)if(e.headers[n]!==this._reqHeaders[n])return!1;return!0}_copyWithoutHopByHopHeaders(e){let r={};for(let n in e)$a[n]||(r[n]=e[n]);if(e.connection){let n=e.connection.trim().split(/\s*,\s*/);for(let s of n)delete r[s]}if(r.warning){let n=r.warning.split(/,/).filter(s=>!/^\s*1[0-9][0-9]/.test(s));n.length?r.warning=n.join(",").trim():delete r.warning}return r}responseHeaders(){let e=this._copyWithoutHopByHopHeaders(this._resHeaders),r=this.age();return r>3600*24&&!this._hasExplicitExpiration()&&this.maxAge()>3600*24&&(e.warning=(e.warning?`${e.warning}, `:"")+'113 - "rfc7234 5.5.4"'),e.age=`${Math.round(r)}`,e.date=new Date(this.now()).toUTCString(),e}date(){let e=Date.parse(this._resHeaders.date);return isFinite(e)?e:this._responseTime}age(){let e=this._ageValue(),r=(this.now()-this._responseTime)/1e3;return e+r}_ageValue(){return pe(this._resHeaders.age)}maxAge(){if(!this.storable()||this._rescc["no-cache"]||this._isShared&&this._resHeaders["set-cookie"]&&!this._rescc.public&&!this._rescc.immutable||this._resHeaders.vary==="*")return 0;if(this._isShared){if(this._rescc["proxy-revalidate"])return 0;if(this._rescc["s-maxage"])return pe(this._rescc["s-maxage"])}if(this._rescc["max-age"])return pe(this._rescc["max-age"]);let e=this._rescc.immutable?this._immutableMinTtl:0,r=this.date();if(this._resHeaders.expires){let n=Date.parse(this._resHeaders.expires);return Number.isNaN(n)||n<r?0:Math.max(e,(n-r)/1e3)}if(this._resHeaders["last-modified"]){let n=Date.parse(this._resHeaders["last-modified"]);if(isFinite(n)&&r>n)return Math.max(e,(r-n)/1e3*this._cacheHeuristic)}return e}timeToLive(){let e=this.maxAge()-this.age(),r=e+pe(this._rescc["stale-if-error"]),n=e+pe(this._rescc["stale-while-revalidate"]);return Math.max(0,e,r,n)*1e3}stale(){return this.maxAge()<=this.age()}_useStaleIfError(){return this.maxAge()+pe(this._rescc["stale-if-error"])>this.age()}useStaleWhileRevalidate(){return this.maxAge()+pe(this._rescc["stale-while-revalidate"])>this.age()}static fromObject(e){return new this(void 0,void 0,{_fromObject:e})}_fromObject(e){if(this._responseTime)throw Error("Reinitialized");if(!e||e.v!==1)throw Error("Invalid serialization");this._responseTime=e.t,this._isShared=e.sh,this._cacheHeuristic=e.ch,this._immutableMinTtl=e.imm!==void 0?e.imm:24*3600*1e3,this._status=e.st,this._resHeaders=e.resh,this._rescc=e.rescc,this._method=e.m,this._url=e.u,this._host=e.h,this._noAuthorization=e.a,this._reqHeaders=e.reqh,this._reqcc=e.reqcc}toObject(){return{v:1,t:this._responseTime,sh:this._isShared,ch:this._cacheHeuristic,imm:this._immutableMinTtl,st:this._status,resh:this._resHeaders,rescc:this._rescc,m:this._method,u:this._url,h:this._host,a:this._noAuthorization,reqh:this._reqHeaders,reqcc:this._reqcc}}revalidationHeaders(e){this._assertRequestHasHeaders(e);let r=this._copyWithoutHopByHopHeaders(e.headers);if(delete r["if-range"],!this._requestMatches(e,!0)||!this.storable())return delete r["if-none-match"],delete r["if-modified-since"],r;if(this._resHeaders.etag&&(r["if-none-match"]=r["if-none-match"]?`${r["if-none-match"]}, ${this._resHeaders.etag}`:this._resHeaders.etag),r["accept-ranges"]||r["if-match"]||r["if-unmodified-since"]||this._method&&this._method!="GET"){if(delete r["if-modified-since"],r["if-none-match"]){let s=r["if-none-match"].split(/,/).filter(i=>!/^\s*W\//.test(i));s.length?r["if-none-match"]=s.join(",").trim():delete r["if-none-match"]}}else this._resHeaders["last-modified"]&&!r["if-modified-since"]&&(r["if-modified-since"]=this._resHeaders["last-modified"]);return r}revalidatedPolicy(e,r){if(this._assertRequestHasHeaders(e),this._useStaleIfError()&&Wa(r))return{modified:!1,matches:!1,policy:this};if(!r||!r.headers)throw Error("Response headers missing");let n=!1;if(r.status!==void 0&&r.status!=304?n=!1:r.headers.etag&&!/^\s*W\//.test(r.headers.etag)?n=this._resHeaders.etag&&this._resHeaders.etag.replace(/^\s*W\//,"")===r.headers.etag:this._resHeaders.etag&&r.headers.etag?n=this._resHeaders.etag.replace(/^\s*W\//,"")===r.headers.etag.replace(/^\s*W\//,""):this._resHeaders["last-modified"]?n=this._resHeaders["last-modified"]===r.headers["last-modified"]:!this._resHeaders.etag&&!this._resHeaders["last-modified"]&&!r.headers.etag&&!r.headers["last-modified"]&&(n=!0),!n)return{policy:new this.constructor(e,r),modified:r.status!=304,matches:!1};let s={};for(let o in this._resHeaders)s[o]=o in r.headers&&!Va[o]?r.headers[o]:this._resHeaders[o];let i=Object.assign({},r,{status:this._status,method:this._method,headers:s});return{policy:new this.constructor(e,i,{shared:this._isShared,cacheHeuristic:this._cacheHeuristic,immutableMinTimeToLive:this._immutableMinTtl}),modified:!1,matches:!0}}}});var is=v((zh,ss)=>{"use strict";ss.exports=t=>{let e={};for(let[r,n]of Object.entries(t))e[r.toLowerCase()]=n;return e}});var cs=v((Fh,as)=>{"use strict";var Ja=require("stream").Readable,Ka=is(),os=class extends Ja{constructor(e,r,n,s){if(typeof e!="number")throw new TypeError("Argument `statusCode` should be a number");if(typeof r!="object")throw new TypeError("Argument `headers` should be an object");if(!(n instanceof Buffer))throw new TypeError("Argument `body` should be a buffer");if(typeof s!="string")throw new TypeError("Argument `url` should be a string");super();this.statusCode=e,this.headers=Ka(r),this.body=n,this.url=s}_read(){this.push(this.body),this.push(null)}};as.exports=os});var hs=v((Mh,us)=>{"use strict";us.exports=t=>{let e={};for(let[r,n]of Object.entries(t))e[r.toLowerCase()]=n;return e}});var ds=v(($h,fs)=>{"use strict";var Qa=["destroy","setTimeout","socket","headers","trailers","rawHeaders","statusCode","httpVersion","httpVersionMinor","httpVersionMajor","rawTrailers","statusMessage"];fs.exports=(t,e)=>{let r=new Set(Object.keys(t).concat(Qa));for(let n of r)n in e||(e[n]=typeof t[n]=="function"?t[n].bind(t):t[n])}});var ps=v((Vh,ls)=>{"use strict";var Ya=require("stream").PassThrough,Xa=ds(),Za=t=>{if(!(t&&t.pipe))throw new TypeError("Parameter `response` must be a response stream.");let e=new Ya;return Xa(t,e),t.pipe(e)};ls.exports=Za});var ms=v(ur=>{ur.stringify=function t(e){if(typeof e>"u")return e;if(e&&Buffer.isBuffer(e))return JSON.stringify(":base64:"+e.toString("base64"));if(e&&e.toJSON&&(e=e.toJSON()),e&&typeof e=="object"){var r="",n=Array.isArray(e);r=n?"[":"{";var s=!0;for(var i in e){var o=typeof e[i]=="function"||!n&&typeof e[i]>"u";Object.hasOwnProperty.call(e,i)&&!o&&(s||(r+=","),s=!1,n?e[i]==null?r+="null":r+=t(e[i]):e[i]!==void 0&&(r+=t(i)+":"+t(e[i])))}return r+=n?"]":"}",r}else return typeof e=="string"?JSON.stringify(/^:/.test(e)?":"+e:e):typeof e>"u"?"null":JSON.stringify(e)};ur.parse=function(t){return JSON.parse(t,function(e,r){return typeof r=="string"?/^:base64:/.test(r)?Buffer.from(r.substring(8),"base64"):/^:/.test(r)?r.substring(1):r:r})}});var bs=v((Gh,_s)=>{"use strict";var ec=require("events"),ys=ms(),tc=t=>{let e={redis:"@keyv/redis",mongodb:"@keyv/mongo",mongo:"@keyv/mongo",sqlite:"@keyv/sqlite",postgresql:"@keyv/postgres",postgres:"@keyv/postgres",mysql:"@keyv/mysql"};if(t.adapter||t.uri){let r=t.adapter||/^[^:]*/.exec(t.uri)[0];return new(require(e[r]))(t)}return new Map},gs=class extends ec{constructor(e,r){super();if(this.opts=Object.assign({namespace:"keyv",serialize:ys.stringify,deserialize:ys.parse},typeof e=="string"?{uri:e}:e,r),!this.opts.store){let n=Object.assign({},this.opts);this.opts.store=tc(n)}typeof this.opts.store.on=="function"&&this.opts.store.on("error",n=>this.emit("error",n)),this.opts.store.namespace=this.opts.namespace}_getKeyPrefix(e){return`${this.opts.namespace}:${e}`}get(e,r){let n=this._getKeyPrefix(e),{store:s}=this.opts;return Promise.resolve().then(()=>s.get(n)).then(i=>typeof i=="string"?this.opts.deserialize(i):i).then(i=>{if(i!==void 0){if(typeof i.expires=="number"&&Date.now()>i.expires){this.delete(e);return}return r&&r.raw?i:i.value}})}set(e,r,n){let s=this._getKeyPrefix(e);typeof n>"u"&&(n=this.opts.ttl),n===0&&(n=void 0);let{store:i}=this.opts;return Promise.resolve().then(()=>{let o=typeof n=="number"?Date.now()+n:null;return r={value:r,expires:o},this.opts.serialize(r)}).then(o=>i.set(s,o,n)).then(()=>!0)}delete(e){let r=this._getKeyPrefix(e),{store:n}=this.opts;return Promise.resolve().then(()=>n.delete(r))}clear(){let{store:e}=this.opts;return Promise.resolve().then(()=>e.clear())}};_s.exports=gs});var vs=v((Jh,Es)=>{"use strict";var rc=require("events"),yt=require("url"),nc=zn(),sc=ts(),hr=ns(),ws=cs(),ic=hs(),oc=ps(),ac=bs(),ee=class{constructor(e,r){if(typeof e!="function")throw new TypeError("Parameter `request` must be a function");return this.cache=new ac({uri:typeof r=="string"&&r,store:typeof r!="string"&&r,namespace:"cacheable-request"}),this.createCacheableRequest(e)}createCacheableRequest(e){return(r,n)=>{let s;if(typeof r=="string")s=fr(yt.parse(r)),r={};else if(r instanceof yt.URL)s=fr(yt.parse(r.toString())),r={};else{let[m,...p]=(r.path||"").split("?"),w=p.length>0?`?${p.join("?")}`:"";s=fr(O(b({},r),{pathname:m,search:w}))}r=b(b({headers:{},method:"GET",cache:!0,strictTtl:!1,automaticFailover:!1},r),cc(s)),r.headers=ic(r.headers);let i=new rc,o=nc(yt.format(s),{stripWWW:!1,removeTrailingSlash:!1,stripAuthentication:!1}),a=`${r.method}:${o}`,h=!1,f=!1,l=m=>{f=!0;let p=!1,w,S=new Promise(y=>{w=()=>{p||(p=!0,y())}}),d=y=>{if(h&&!m.forceRefresh){y.status=y.statusCode;let x=hr.fromObject(h.cachePolicy).revalidatedPolicy(m,y);if(!x.modified){let E=x.policy.responseHeaders();y=new ws(h.statusCode,E,h.body,h.url),y.cachePolicy=x.policy,y.fromCache=!0}}y.fromCache||(y.cachePolicy=new hr(m,y,m),y.fromCache=!1);let _;m.cache&&y.cachePolicy.storable()?(_=oc(y),(async()=>{try{let x=sc.buffer(y);if(await Promise.race([S,new Promise(L=>y.once("end",L))]),p)return;let E=await x,T={cachePolicy:y.cachePolicy.toObject(),url:y.url,statusCode:y.fromCache?h.statusCode:y.statusCode,body:E},k=m.strictTtl?y.cachePolicy.timeToLive():void 0;m.maxTtl&&(k=k?Math.min(k,m.maxTtl):m.maxTtl),await this.cache.set(a,T,k)}catch(x){i.emit("error",new ee.CacheError(x))}})()):m.cache&&h&&(async()=>{try{await this.cache.delete(a)}catch(x){i.emit("error",new ee.CacheError(x))}})(),i.emit("response",_||y),typeof n=="function"&&n(_||y)};try{let y=e(m,d);y.once("error",w),y.once("abort",w),i.emit("request",y)}catch(y){i.emit("error",new ee.RequestError(y))}};return(async()=>{let m=async w=>{await Promise.resolve();let S=w.cache?await this.cache.get(a):void 0;if(typeof S>"u")return l(w);let d=hr.fromObject(S.cachePolicy);if(d.satisfiesWithoutRevalidation(w)&&!w.forceRefresh){let y=d.responseHeaders(),_=new ws(S.statusCode,y,S.body,S.url);_.cachePolicy=d,_.fromCache=!0,i.emit("response",_),typeof n=="function"&&n(_)}else h=S,w.headers=d.revalidationHeaders(w),l(w)},p=w=>i.emit("error",new ee.CacheError(w));this.cache.once("error",p),i.on("response",()=>this.cache.removeListener("error",p));try{await m(r)}catch(w){r.automaticFailover&&!f&&l(r),i.emit("error",new ee.CacheError(w))}})(),i}}};function cc(t){let e=b({},t);return e.path=`${t.pathname||"/"}${t.search||""}`,delete e.pathname,delete e.search,e}function fr(t){return{protocol:t.protocol,auth:t.auth,hostname:t.hostname||t.host||"localhost",port:t.port,pathname:t.pathname,search:t.search}}ee.RequestError=class extends Error{constructor(t){super(t.message);this.name="RequestError",Object.assign(this,t)}};ee.CacheError=class extends Error{constructor(t){super(t.message);this.name="CacheError",Object.assign(this,t)}};Es.exports=ee});var xs=v((Kh,Ss)=>{"use strict";var uc=["aborted","complete","headers","httpVersion","httpVersionMinor","httpVersionMajor","method","rawHeaders","rawTrailers","setTimeout","socket","statusCode","statusMessage","trailers","url"];Ss.exports=(t,e)=>{if(e._readableState.autoDestroy)throw new Error("The second stream must have the `autoDestroy` option set to `false`");let r=new Set(Object.keys(t).concat(uc)),n={};for(let s of r)s in e||(n[s]={get(){let i=t[s];return typeof i=="function"?i.bind(t):i},set(i){t[s]=i},enumerable:!0,configurable:!1});return Object.defineProperties(e,n),t.once("aborted",()=>{e.destroy(),e.emit("aborted")}),t.once("close",()=>{t.complete&&e.readable?e.once("end",()=>{e.emit("close")}):e.emit("close")}),e}});var Ts=v((Qh,Cs)=>{"use strict";var{Transform:hc,PassThrough:fc}=require("stream"),dr=require("zlib"),dc=xs();Cs.exports=t=>{let e=(t.headers["content-encoding"]||"").toLowerCase();if(!["gzip","deflate","br"].includes(e))return t;let r=e==="br";if(r&&typeof dr.createBrotliDecompress!="function")return t.destroy(new Error("Brotli is not supported on Node.js < 12")),t;let n=!0,s=new hc({transform(a,h,f){n=!1,f(null,a)},flush(a){a()}}),i=new fc({autoDestroy:!1,destroy(a,h){t.destroy(),h(a)}}),o=r?dr.createBrotliDecompress():dr.createUnzip();return o.once("error",a=>{if(n&&!t.readable){i.end();return}i.destroy(a)}),dc(t,i),t.pipe(s).pipe(o).pipe(i),i}});var Os=v((Yh,Rs)=>{"use strict";var{PassThrough:lc}=require("stream");Rs.exports=t=>{t=b({},t);let{array:e}=t,{encoding:r}=t,n=r==="buffer",s=!1;e?s=!(r||n):r=r||"utf8",n&&(r=null);let i=new lc({objectMode:s});r&&i.setEncoding(r);let o=0,a=[];return i.on("data",h=>{a.push(h),s?o=a.length:o+=h.length}),i.getBufferedValue=()=>e?a:n?Buffer.concat(a,o):a.join(""),i.getBufferedLength=()=>o,i}});var ks=v((Xh,Fe)=>{"use strict";var{constants:pc}=require("buffer"),mc=require("stream"),{promisify:yc}=require("util"),gc=Os(),_c=yc(mc.pipeline),lr=class extends Error{constructor(){super("maxBuffer exceeded");this.name="MaxBufferError"}};async function pr(t,e){if(!t)throw new Error("Expected a stream");e=b({maxBuffer:1/0},e);let{maxBuffer:r}=e,n=gc(e);return await new Promise((s,i)=>{let o=a=>{a&&n.getBufferedLength()<=pc.MAX_LENGTH&&(a.bufferedData=n.getBufferedValue()),i(a)};(async()=>{try{await _c(t,n),s()}catch(a){o(a)}})(),n.on("data",()=>{n.getBufferedLength()>r&&o(new lr)})}),n.getBufferedValue()}Fe.exports=pr;Fe.exports.buffer=(t,e)=>pr(t,O(b({},e),{encoding:"buffer"}));Fe.exports.array=(t,e)=>pr(t,O(b({},e),{array:!0}));Fe.exports.MaxBufferError=lr});var Ms=v((jf,Ar)=>{"use strict";var{V4MAPPED:Oc,ADDRCONFIG:kc,ALL:Fs,promises:{Resolver:Ds},lookup:Pc}=require("dns"),{promisify:Or}=require("util"),Ac=require("os"),xe=Symbol("cacheableLookupCreateConnection"),kr=Symbol("cacheableLookupInstance"),Bs=Symbol("expires"),qc=typeof Fs=="number",Ns=t=>{if(!(t&&typeof t.createConnection=="function"))throw new Error("Expected an Agent instance as the first argument")},jc=t=>{for(let e of t)e.family!==6&&(e.address=`::ffff:${e.address}`,e.family=6)},Us=()=>{let t=!1,e=!1;for(let r of Object.values(Ac.networkInterfaces()))for(let n of r)if(!n.internal&&(n.family==="IPv6"?e=!0:t=!0,t&&e))return{has4:t,has6:e};return{has4:t,has6:e}},Hc=t=>Symbol.iterator in t,xt=t=>t.catch(e=>{if(e.code==="ENODATA"||e.code==="ENOTFOUND"||e.code==="ENOENT")return[];throw e}),zs={ttl:!0},Lc={all:!0},Ic={all:!0,family:4},Dc={all:!0,family:6},Pr=class{constructor({cache:e=new Map,maxTtl:r=1/0,fallbackDuration:n=3600,errorTtl:s=.15,resolver:i=new Ds,lookup:o=Pc}={}){if(this.maxTtl=r,this.errorTtl=s,this._cache=e,this._resolver=i,this._dnsLookup=o&&Or(o),this._resolver instanceof Ds?(this._resolve4=this._resolver.resolve4.bind(this._resolver),this._resolve6=this._resolver.resolve6.bind(this._resolver)):(this._resolve4=Or(this._resolver.resolve4.bind(this._resolver)),this._resolve6=Or(this._resolver.resolve6.bind(this._resolver))),this._iface=Us(),this._pending={},this._nextRemovalTime=!1,this._hostnamesToFallback=new Set,this.fallbackDuration=n,n>0){let a=setInterval(()=>{this._hostnamesToFallback.clear()},n*1e3);a.unref&&a.unref(),this._fallbackInterval=a}this.lookup=this.lookup.bind(this),this.lookupAsync=this.lookupAsync.bind(this)}set servers(e){this.clear(),this._resolver.setServers(e)}get servers(){return this._resolver.getServers()}lookup(e,r,n){if(typeof r=="function"?(n=r,r={}):typeof r=="number"&&(r={family:r}),!n)throw new Error("Callback must be a function.");this.lookupAsync(e,r).then(s=>{r.all?n(null,s):n(null,s.address,s.family,s.expires,s.ttl)},n)}async lookupAsync(e,r={}){typeof r=="number"&&(r={family:r});let n=await this.query(e);if(r.family===6){let s=n.filter(i=>i.family===6);r.hints&Oc&&(qc&&r.hints&Fs||s.length===0)?jc(n):n=s}else r.family===4&&(n=n.filter(s=>s.family===4));if(r.hints&kc){let{_iface:s}=this;n=n.filter(i=>i.family===6?s.has6:s.has4)}if(n.length===0){let s=new Error(`cacheableLookup ENOTFOUND ${e}`);throw s.code="ENOTFOUND",s.hostname=e,s}return r.all?n:n[0]}async query(e){let r=await this._cache.get(e);if(!r){let n=this._pending[e];if(n)r=await n;else{let s=this.queryAndCache(e);this._pending[e]=s;try{r=await s}finally{delete this._pending[e]}}}return r=r.map(n=>b({},n)),r}async _resolve(e){let[r,n]=await Promise.all([xt(this._resolve4(e,zs)),xt(this._resolve6(e,zs))]),s=0,i=0,o=0,a=Date.now();for(let h of r)h.family=4,h.expires=a+h.ttl*1e3,s=Math.max(s,h.ttl);for(let h of n)h.family=6,h.expires=a+h.ttl*1e3,i=Math.max(i,h.ttl);return r.length>0?n.length>0?o=Math.min(s,i):o=s:o=i,{entries:[...r,...n],cacheTtl:o}}async _lookup(e){try{let[r,n]=await Promise.all([xt(this._dnsLookup(e,Ic)),xt(this._dnsLookup(e,Dc))]);return{entries:[...r,...n],cacheTtl:0}}catch{return{entries:[],cacheTtl:0}}}async _set(e,r,n){if(this.maxTtl>0&&n>0){n=Math.min(n,this.maxTtl)*1e3,r[Bs]=Date.now()+n;try{await this._cache.set(e,r,n)}catch(s){this.lookupAsync=async()=>{let i=new Error("Cache Error. Please recreate the CacheableLookup instance.");throw i.cause=s,i}}Hc(this._cache)&&this._tick(n)}}async queryAndCache(e){if(this._hostnamesToFallback.has(e))return this._dnsLookup(e,Lc);let r=await this._resolve(e);r.entries.length===0&&this._dnsLookup&&(r=await this._lookup(e),r.entries.length!==0&&this.fallbackDuration>0&&this._hostnamesToFallback.add(e));let n=r.entries.length===0?this.errorTtl:r.cacheTtl;return await this._set(e,r.entries,n),r.entries}_tick(e){let r=this._nextRemovalTime;(!r||e<r)&&(clearTimeout(this._removalTimeout),this._nextRemovalTime=e,this._removalTimeout=setTimeout(()=>{this._nextRemovalTime=!1;let n=1/0,s=Date.now();for(let[i,o]of this._cache){let a=o[Bs];s>=a?this._cache.delete(i):a<n&&(n=a)}n!==1/0&&this._tick(n-s)},e),this._removalTimeout.unref&&this._removalTimeout.unref())}install(e){if(Ns(e),xe in e)throw new Error("CacheableLookup has been already installed");e[xe]=e.createConnection,e[kr]=this,e.createConnection=(r,n)=>("lookup"in r||(r.lookup=this.lookup),e[xe](r,n))}uninstall(e){if(Ns(e),e[xe]){if(e[kr]!==this)throw new Error("The agent is not owned by this CacheableLookup instance");e.createConnection=e[xe],delete e[xe],delete e[kr]}}updateInterfaceInfo(){let{_iface:e}=this;this._iface=Us(),(e.has4&&!this._iface.has4||e.has6&&!this._iface.has6)&&this._cache.clear()}clear(e){if(e){this._cache.delete(e);return}this._cache.clear()}};Ar.exports=Pr;Ar.exports.default=Pr});var qr=v((Hf,Vs)=>{"use strict";var $s=class{constructor(e={}){if(!(e.maxSize&&e.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");this.maxSize=e.maxSize,this.onEviction=e.onEviction,this.cache=new Map,this.oldCache=new Map,this._size=0}_set(e,r){if(this.cache.set(e,r),this._size++,this._size>=this.maxSize){if(this._size=0,typeof this.onEviction=="function")for(let[n,s]of this.oldCache.entries())this.onEviction(n,s);this.oldCache=this.cache,this.cache=new Map}}get(e){if(this.cache.has(e))return this.cache.get(e);if(this.oldCache.has(e)){let r=this.oldCache.get(e);return this.oldCache.delete(e),this._set(e,r),r}}set(e,r){return this.cache.has(e)?this.cache.set(e,r):this._set(e,r),this}has(e){return this.cache.has(e)||this.oldCache.has(e)}peek(e){if(this.cache.has(e))return this.cache.get(e);if(this.oldCache.has(e))return this.oldCache.get(e)}delete(e){let r=this.cache.delete(e);return r&&this._size--,this.oldCache.delete(e)||r}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}*keys(){for(let[e]of this)yield e}*values(){for(let[,e]of this)yield e}*[Symbol.iterator](){for(let e of this.cache)yield e;for(let e of this.oldCache){let[r]=e;this.cache.has(r)||(yield e)}}get size(){let e=0;for(let r of this.oldCache.keys())this.cache.has(r)||e++;return Math.min(this._size+e,this.maxSize)}};Vs.exports=$s});var jr=v((Lf,Ws)=>{"use strict";Ws.exports=t=>{if(t.listenerCount("error")!==0)return;t.__destroy=t._destroy,t._destroy=(...r)=>{let n=r.pop();t.__destroy(...r,async s=>{await Promise.resolve(),n(s)})};let e=r=>{Promise.resolve().then(()=>{t.emit("error",r)})};return t.once("error",e),Promise.resolve().then(()=>{t.off("error",e)}),t}});var _e=v((If,Xs)=>{"use strict";var{URL:Gs}=require("url"),Bc=require("events"),Nc=require("tls"),Uc=require("http2"),zc=qr(),Fc=jr(),U=Symbol("currentStreamCount"),Js=Symbol("request"),z=Symbol("cachedOriginSet"),ue=Symbol("gracefullyClosing"),Ct=Symbol("length"),Ks=["createConnection","maxDeflateDynamicTableSize","maxSettings","maxSessionMemory","maxHeaderListPairs","maxOutstandingPings","maxReservedRemoteStreams","maxSendHeaderBlockLength","paddingStrategy","peerMaxConcurrentStreams","settings","family","localAddress","rejectUnauthorized","pskCallback","minDHSize","path","socket","ca","cert","sigalgs","ciphers","clientCertEngine","crl","dhparam","ecdhCurve","honorCipherOrder","key","privateKeyEngine","privateKeyIdentifier","maxVersion","minVersion","pfx","secureOptions","secureProtocol","sessionIdContext","ticketKeys"],Mc=(t,e,r)=>{let n=0,s=t.length;for(;n<s;){let i=n+s>>>1;r(t[i],e)?n=i+1:s=i}return n},$c=(t,e)=>t.remoteSettings.maxConcurrentStreams>e.remoteSettings.maxConcurrentStreams,Hr=(t,e)=>{for(let r=0;r<t.length;r++){let n=t[r];n[z].length>0&&n[z].length<e[z].length&&n[z].every(s=>e[z].includes(s))&&n[U]+e[U]<=e.remoteSettings.maxConcurrentStreams&&Ys(n)}},Qs=(t,e)=>{for(let r=0;r<t.length;r++){let n=t[r];if(e[z].length>0&&e[z].length<n[z].length&&e[z].every(s=>n[z].includes(s))&&e[U]+n[U]<=n.remoteSettings.maxConcurrentStreams)return Ys(e),!0}return!1},Ys=t=>{t[ue]=!0,t[U]===0&&t.close()},ge=class extends Bc{constructor({timeout:e=0,maxSessions:r=Number.POSITIVE_INFINITY,maxEmptySessions:n=10,maxCachedTlsSessions:s=100}={}){super();this.sessions={},this.queue={},this.timeout=e,this.maxSessions=r,this.maxEmptySessions=n,this._emptySessionCount=0,this._sessionCount=0,this.settings={enablePush:!1,initialWindowSize:1024*1024*32},this.tlsSessionCache=new zc({maxSize:s})}get protocol(){return"https:"}normalizeOptions(e){let r="";for(let n=0;n<Ks.length;n++){let s=Ks[n];r+=":",e&&e[s]!==void 0&&(r+=e[s])}return r}_processQueue(){if(this._sessionCount>=this.maxSessions){this.closeEmptySessions(this.maxSessions-this._sessionCount+1);return}for(let e in this.queue)for(let r in this.queue[e]){let n=this.queue[e][r];n.completed||(n.completed=!0,n())}}_isBetterSession(e,r){return e>r}_accept(e,r,n,s){let i=0;for(;i<r.length&&e[U]<e.remoteSettings.maxConcurrentStreams;)r[i].resolve(e),i++;r.splice(0,i),r.length>0&&(this.getSession(n,s,r),r.length=0)}getSession(e,r,n){return new Promise((s,i)=>{Array.isArray(n)&&n.length>0?(n=[...n],s()):n=[{resolve:s,reject:i}];try{if(typeof e=="string")e=new Gs(e);else if(!(e instanceof Gs))throw new TypeError("The `origin` argument needs to be a string or an URL object");if(r){let{servername:l}=r,{hostname:m}=e;if(l&&m!==l)throw new Error(`Origin ${m} differs from servername ${l}`)}}catch(l){for(let m=0;m<n.length;m++)n[m].reject(l);return}let o=this.normalizeOptions(r),a=e.origin;if(o in this.sessions){let l=this.sessions[o],m=-1,p=-1,w;for(let S=0;S<l.length;S++){let d=l[S],y=d.remoteSettings.maxConcurrentStreams;if(y<m)break;if(!d[z].includes(a))continue;let _=d[U];_>=y||d[ue]||d.destroyed||(w||(m=y),this._isBetterSession(_,p)&&(w=d,p=_))}if(w){this._accept(w,n,a,r);return}}if(o in this.queue){if(a in this.queue[o]){this.queue[o][a].listeners.push(...n);return}}else this.queue[o]={[Ct]:0};let h=()=>{o in this.queue&&this.queue[o][a]===f&&(delete this.queue[o][a],--this.queue[o][Ct]===0&&delete this.queue[o])},f=async()=>{this._sessionCount++;let l=`${a}:${o}`,m=!1,p;try{let w=b({},r);w.settings===void 0&&(w.settings=this.settings),w.session===void 0&&(w.session=this.tlsSessionCache.get(l)),p=await(w.createConnection||this.createConnection).call(this,e,w),w.createConnection=()=>p;let d=Uc.connect(e,w);d[U]=0,d[ue]=!1;let y=()=>{let{socket:E}=d,T;return E.servername===!1?(E.servername=E.remoteAddress,T=d.originSet,E.servername=!1):T=d.originSet,T},_=()=>d[U]<d.remoteSettings.maxConcurrentStreams;d.socket.once("session",E=>{this.tlsSessionCache.set(l,E)}),d.once("error",E=>{for(let T=0;T<n.length;T++)n[T].reject(E);this.tlsSessionCache.delete(l)}),d.setTimeout(this.timeout,()=>{d.destroy()}),d.once("close",()=>{if(this._sessionCount--,m){this._emptySessionCount--;let E=this.sessions[o];E.length===1?delete this.sessions[o]:E.splice(E.indexOf(d),1)}else{h();let E=new Error("Session closed without receiving a SETTINGS frame");E.code="HTTP2WRAPPER_NOSETTINGS";for(let T=0;T<n.length;T++)n[T].reject(E)}this._processQueue()});let x=()=>{let E=this.queue[o];if(!E)return;let T=d[z];for(let k=0;k<T.length;k++){let L=T[k];if(L in E){let{listeners:Q,completed:Re}=E[L],j=0;for(;j<Q.length&&_();)Q[j].resolve(d),j++;if(E[L].listeners.splice(0,j),E[L].listeners.length===0&&!Re&&(delete E[L],--E[Ct]===0)){delete this.queue[o];break}if(!_())break}}};d.on("origin",()=>{d[z]=y()||[],d[ue]=!1,Qs(this.sessions[o],d),!(d[ue]||!_())&&(x(),!!_()&&Hr(this.sessions[o],d))}),d.once("remoteSettings",()=>{if(f.destroyed){let E=new Error("Agent has been destroyed");for(let T=0;T<n.length;T++)n[T].reject(E);d.destroy();return}if(d.setLocalWindowSize&&d.setLocalWindowSize(1024*1024*4),d[z]=y()||[],d.socket.encrypted){let E=d[z][0];if(E!==a){let T=new Error(`Requested origin ${a} does not match server ${E}`);for(let k=0;k<n.length;k++)n[k].reject(T);d.destroy();return}}h();{let E=this.sessions;if(o in E){let T=E[o];T.splice(Mc(T,d,$c),0,d)}else E[o]=[d]}m=!0,this._emptySessionCount++,this.emit("session",d),this._accept(d,n,a,r),d[U]===0&&this._emptySessionCount>this.maxEmptySessions&&this.closeEmptySessions(this._emptySessionCount-this.maxEmptySessions),d.on("remoteSettings",()=>{!_()||(x(),!!_()&&Hr(this.sessions[o],d))})}),d[Js]=d.request,d.request=(E,T)=>{if(d[ue])throw new Error("The session is gracefully closing. No new streams are allowed.");let k=d[Js](E,T);return d.ref(),d[U]++===0&&this._emptySessionCount--,k.once("close",()=>{if(--d[U]===0&&(this._emptySessionCount++,d.unref(),this._emptySessionCount>this.maxEmptySessions||d[ue])){d.close();return}d.destroyed||d.closed||_()&&!Qs(this.sessions[o],d)&&(Hr(this.sessions[o],d),x(),d[U]===0&&this._processQueue())}),k}}catch(w){h(),this._sessionCount--;for(let S=0;S<n.length;S++)n[S].reject(w)}};f.listeners=n,f.completed=!1,f.destroyed=!1,this.queue[o][a]=f,this.queue[o][Ct]++,this._processQueue()})}request(e,r,n,s){return new Promise((i,o)=>{this.getSession(e,r,[{reject:o,resolve:a=>{try{let h=a.request(n,s);Fc(h),i(h)}catch(h){o(h)}}}])})}async createConnection(e,r){return ge.connect(e,r)}static connect(e,r){r.ALPNProtocols=["h2"];let n=e.port||443,s=e.hostname;typeof r.servername>"u"&&(r.servername=s);let i=Nc.connect(n,s,r);return r.socket&&(i._peername={family:void 0,address:void 0,port:n}),i}closeEmptySessions(e=Number.POSITIVE_INFINITY){let r=0,{sessions:n}=this;for(let s in n){let i=n[s];for(let o=0;o<i.length;o++){let a=i[o];if(a[U]===0&&(r++,a.close(),r>=e))return r}}return r}destroy(e){let{sessions:r,queue:n}=this;for(let s in r){let i=r[s];for(let o=0;o<i.length;o++)i[o].destroy(e)}for(let s in n){let i=n[s];for(let o in i)i[o].destroyed=!0}this.queue={},this.tlsSessionCache.clear()}get emptySessionCount(){return this._emptySessionCount}get pendingSessionCount(){return this._sessionCount-this._emptySessionCount}get sessionCount(){return this._sessionCount}};ge.kCurrentStreamCount=U;ge.kGracefullyClosing=ue;Xs.exports={Agent:ge,globalAgent:new ge}});var Lr=v((Df,ei)=>{"use strict";var{Readable:Vc}=require("stream"),Zs=class extends Vc{constructor(e,r){super({emitClose:!1,autoDestroy:!0,highWaterMark:r});this.statusCode=null,this.statusMessage="",this.httpVersion="2.0",this.httpVersionMajor=2,this.httpVersionMinor=0,this.headers={},this.trailers={},this.req=null,this.aborted=!1,this.complete=!1,this.upgrade=null,this.rawHeaders=[],this.rawTrailers=[],this.socket=e,this._dumped=!1}get connection(){return this.socket}set connection(e){this.socket=e}_destroy(e,r){this.readableEnded||(this.aborted=!0),r(),this.req._request.destroy(e)}setTimeout(e,r){return this.req.setTimeout(e,r),this}_dump(){this._dumped||(this._dumped=!0,this.removeAllListeners("data"),this.resume())}_read(){this.req&&this.req._request.resume()}};ei.exports=Zs});var ri=v((Bf,ti)=>{"use strict";ti.exports=(t,e,r)=>{for(let n of r)t.on(n,(...s)=>e.emit(n,...s))}});var Qe=v((Uf,ni)=>{"use strict";var be=(t,e,r)=>{ni.exports[e]=class extends t{constructor(...s){super(typeof r=="string"?r:r(s));this.name=`${super.name} [${e}]`,this.code=e}}};be(TypeError,"ERR_INVALID_ARG_TYPE",t=>{let e=t[0].includes(".")?"property":"argument",r=t[1],n=Array.isArray(r);return n&&(r=`${r.slice(0,-1).join(", ")} or ${r.slice(-1)}`),`The "${t[0]}" ${e} must be ${n?"one of":"of"} type ${r}. Received ${typeof t[2]}`});be(TypeError,"ERR_INVALID_PROTOCOL",t=>`Protocol "${t[0]}" not supported. Expected "${t[1]}"`);be(Error,"ERR_HTTP_HEADERS_SENT",t=>`Cannot ${t[0]} headers after they are sent to the client`);be(TypeError,"ERR_INVALID_HTTP_TOKEN",t=>`${t[0]} must be a valid HTTP token [${t[1]}]`);be(TypeError,"ERR_HTTP_INVALID_HEADER_VALUE",t=>`Invalid value "${t[0]} for header "${t[1]}"`);be(TypeError,"ERR_INVALID_CHAR",t=>`Invalid character in ${t[0]} [${t[1]}]`);be(Error,"ERR_HTTP2_NO_SOCKET_MANIPULATION","HTTP/2 sockets should not be directly manipulated (e.g. read and written)")});var ii=v((zf,si)=>{"use strict";si.exports=t=>{switch(t){case":method":case":scheme":case":authority":case":path":return!0;default:return!1}}});var Ir=v((Ff,oi)=>{"use strict";var{ERR_INVALID_HTTP_TOKEN:Wc}=Qe(),Gc=ii(),Jc=/^[\^`\-\w!#$%&*+.|~]+$/;oi.exports=t=>{if(typeof t!="string"||!Jc.test(t)&&!Gc(t))throw new Wc("Header name",t)}});var Dr=v((Mf,ai)=>{"use strict";var{ERR_HTTP_INVALID_HEADER_VALUE:Kc,ERR_INVALID_CHAR:Qc}=Qe(),Yc=/[^\t\u0020-\u007E\u0080-\u00FF]/;ai.exports=(t,e)=>{if(typeof e>"u")throw new Kc(e,t);if(Yc.test(e))throw new Qc("header content",t)}});var hi=v(($f,ui)=>{"use strict";var{ERR_HTTP2_NO_SOCKET_MANIPULATION:ci}=Qe(),Xc={has(t,e){let r=t.session===void 0?t:t.session.socket;return e in t||e in r},get(t,e){switch(e){case"on":case"once":case"end":case"emit":case"destroy":return t[e].bind(t);case"writable":case"destroyed":return t[e];case"readable":return t.destroyed?!1:t.readable;case"setTimeout":{let{session:r}=t;return r!==void 0?r.setTimeout.bind(r):t.setTimeout.bind(t)}case"write":case"read":case"pause":case"resume":throw new ci;default:{let r=t.session===void 0?t:t.session.socket,n=r[e];return typeof n=="function"?n.bind(r):n}}},getPrototypeOf(t){return t.session!==void 0?Reflect.getPrototypeOf(t.session.socket):Reflect.getPrototypeOf(t)},set(t,e,r){switch(e){case"writable":case"readable":case"destroyed":case"on":case"once":case"end":case"emit":case"destroy":return t[e]=r,!0;case"setTimeout":{let{session:n}=t;return n===void 0?t.setTimeout=r:n.setTimeout=r,!0}case"write":case"read":case"pause":case"resume":throw new ci;default:{let n=t.session===void 0?t:t.session.socket;return n[e]=r,!0}}}};ui.exports=Xc});var Ur=v((Vf,gi)=>{"use strict";var{URL:Br,urlToHttpOptions:fi}=require("url"),Zc=require("http2"),{Writable:eu}=require("stream"),{Agent:tu,globalAgent:ru}=_e(),nu=Lr(),su=ri(),{ERR_INVALID_ARG_TYPE:Tt,ERR_INVALID_PROTOCOL:iu,ERR_HTTP_HEADERS_SENT:di}=Qe(),ou=Ir(),au=Dr(),cu=hi(),{HTTP2_HEADER_STATUS:li,HTTP2_HEADER_METHOD:pi,HTTP2_HEADER_PATH:mi,HTTP2_HEADER_AUTHORITY:Ye,HTTP2_METHOD_CONNECT:uu}=Zc.constants,D=Symbol("headers"),Ce=Symbol("origin"),Xe=Symbol("session"),Nr=Symbol("options"),Rt=Symbol("flushedHeaders"),Ze=Symbol("jobs"),et=Symbol("pendingAgentPromise"),yi=class extends eu{constructor(e,r,n){super({autoDestroy:!1,emitClose:!1});if(typeof e=="string"?e=fi(new Br(e)):e instanceof Br?e=fi(e):e=b({},e),typeof r=="function"||r===void 0?(n=r,r=e):r=Object.assign(e,r),r.h2session){if(this[Xe]=r.h2session,this[Xe].destroyed)throw new Error("The session has been closed already");this.protocol=this[Xe].socket.encrypted?"https:":"http:"}else if(r.agent===!1)this.agent=new tu({maxEmptySessions:0});else if(typeof r.agent>"u"||r.agent===null)this.agent=ru;else if(typeof r.agent.request=="function")this.agent=r.agent;else throw new Tt("options.agent",["http2wrapper.Agent-like Object","undefined","false"],r.agent);if(this.agent&&(this.protocol=this.agent.protocol),r.protocol&&r.protocol!==this.protocol)throw new iu(r.protocol,this.protocol);r.port||(r.port=r.defaultPort||this.agent&&this.agent.defaultPort||443),r.host=r.hostname||r.host||"localhost",delete r.hostname;let{timeout:s}=r;r.timeout=void 0,this[D]=Object.create(null),this[Ze]=[],this[et]=void 0,this.socket=null,this.connection=null,this.method=r.method||"GET",this.method==="CONNECT"&&(r.path==="/"||r.path===void 0)||(this.path=r.path),this.res=null,this.aborted=!1,this.reusedSocket=!1;let{headers:i}=r;if(i)for(let a in i)this.setHeader(a,i[a]);r.auth&&!("authorization"in this[D])&&(this[D].authorization="Basic "+Buffer.from(r.auth).toString("base64")),r.session=r.tlsSession,r.path=r.socketPath,this[Nr]=r,this[Ce]=new Br(`${this.protocol}//${r.servername||r.host}:${r.port}`);let o=r._reuseSocket;o&&(r.createConnection=(...a)=>o.destroyed?this.agent.createConnection(...a):o,this.agent.getSession(this[Ce],this[Nr]).catch(()=>{})),s&&this.setTimeout(s),n&&this.once("response",n),this[Rt]=!1}get method(){return this[D][pi]}set method(e){e&&(this[D][pi]=e.toUpperCase())}get path(){let e=this.method==="CONNECT"?Ye:mi;return this[D][e]}set path(e){if(e){let r=this.method==="CONNECT"?Ye:mi;this[D][r]=e}}get host(){return this[Ce].hostname}set host(e){}get _mustNotHaveABody(){return this.method==="GET"||this.method==="HEAD"||this.method==="DELETE"}_write(e,r,n){if(this._mustNotHaveABody){n(new Error("The GET, HEAD and DELETE methods must NOT have a body"));return}this.flushHeaders();let s=()=>this._request.write(e,r,n);this._request?s():this[Ze].push(s)}_final(e){this.flushHeaders();let r=()=>{if(this._mustNotHaveABody||this.method==="CONNECT"){e();return}this._request.end(e)};this._request?r():this[Ze].push(r)}abort(){this.res&&this.res.complete||(this.aborted||process.nextTick(()=>this.emit("abort")),this.aborted=!0,this.destroy())}async _destroy(e,r){this.res&&this.res._dump(),this._request?this._request.destroy():process.nextTick(()=>{this.emit("close")});try{await this[et]}catch(n){this.aborted&&(e=n)}r(e)}async flushHeaders(){if(this[Rt]||this.destroyed)return;this[Rt]=!0;let e=this.method===uu,r=n=>{if(this._request=n,this.destroyed){n.destroy();return}e||su(n,this,["timeout","continue"]),n.once("error",i=>{this.destroy(i)}),n.once("aborted",()=>{let{res:i}=this;i?(i.aborted=!0,i.emit("aborted"),i.destroy()):this.destroy(new Error("The server aborted the HTTP/2 stream"))});let s=(i,o,a)=>{let h=new nu(this.socket,n.readableHighWaterMark);this.res=h,h.url=`${this[Ce].origin}${this.path}`,h.req=this,h.statusCode=i[li],h.headers=i,h.rawHeaders=a,h.once("end",()=>{h.complete=!0,h.socket=null,h.connection=null}),e?(h.upgrade=!0,this.emit("connect",h,n,Buffer.alloc(0))?this.emit("close"):n.destroy()):(n.on("data",f=>{!h._dumped&&!h.push(f)&&n.pause()}),n.once("end",()=>{this.aborted||h.push(null)}),this.emit("response",h)||h._dump())};n.once("response",s),n.once("headers",i=>this.emit("information",{statusCode:i[li]})),n.once("trailers",(i,o,a)=>{let{res:h}=this;if(h===null){s(i,o,a);return}h.trailers=i,h.rawTrailers=a}),n.once("close",()=>{let{aborted:i,res:o}=this;if(o){i&&(o.aborted=!0,o.emit("aborted"),o.destroy());let a=()=>{o.emit("close"),this.destroy(),this.emit("close")};o.readable?o.once("end",a):a();return}if(!this.destroyed){this.destroy(new Error("The HTTP/2 stream has been early terminated")),this.emit("close");return}this.destroy(),this.emit("close")}),this.socket=new Proxy(n,cu);for(let i of this[Ze])i();this.emit("socket",this.socket)};if(!(Ye in this[D])&&!e&&(this[D][Ye]=this[Ce].host),this[Xe])try{r(this[Xe].request(this[D]))}catch(n){this.destroy(n)}else{this.reusedSocket=!0;try{let n=this.agent.request(this[Ce],this[Nr],this[D]);this[et]=n,r(await n),this[et]=!1}catch(n){this[et]=!1,this.destroy(n)}}}get connection(){return this.socket}set connection(e){this.socket=e}getHeaderNames(){return Object.keys(this[D])}hasHeader(e){if(typeof e!="string")throw new Tt("name","string",e);return Boolean(this[D][e.toLowerCase()])}getHeader(e){if(typeof e!="string")throw new Tt("name","string",e);return this[D][e.toLowerCase()]}get headersSent(){return this[Rt]}removeHeader(e){if(typeof e!="string")throw new Tt("name","string",e);if(this.headersSent)throw new di("remove");delete this[D][e.toLowerCase()]}setHeader(e,r){if(this.headersSent)throw new di("set");ou(e),au(e,r);let n=e.toLowerCase();if(n==="connection"){if(r.toLowerCase()==="keep-alive")return;throw new Error(`Invalid 'connection' header: ${r}`)}n==="host"&&this.method==="CONNECT"?this[D][Ye]=r:this[D][n]=r}setNoDelay(){}setSocketKeepAlive(){}setTimeout(e,r){let n=()=>this._request.setTimeout(e,r);return this._request?n():this[Ze].push(n),this}get maxHeadersCount(){if(!this.destroyed&&this._request)return this._request.session.localSettings.maxHeaderListSize}set maxHeadersCount(e){}};gi.exports=yi});var bi=v((Wf,_i)=>{"use strict";var hu=require("tls");_i.exports=(t={},e=hu.connect)=>new Promise((r,n)=>{let s=!1,i,o=async()=>{await h,i.off("timeout",a),i.off("error",n),t.resolveSocket?(r({alpnProtocol:i.alpnProtocol,socket:i,timeout:s}),s&&(await Promise.resolve(),i.emit("timeout"))):(i.destroy(),r({alpnProtocol:i.alpnProtocol,timeout:s}))},a=async()=>{s=!0,o()},h=(async()=>{try{i=await e(t,o),i.on("error",n),i.once("timeout",a)}catch(f){n(f)}})()})});var Ei=v((Gf,wi)=>{"use strict";var{isIP:fu}=require("net"),du=require("assert"),lu=t=>{if(t[0]==="["){let r=t.indexOf("]");return du(r!==-1),t.slice(1,r)}let e=t.indexOf(":");return e===-1?t:t.slice(0,e)};wi.exports=t=>{let e=lu(t);return fu(e)?"":e}});var ki=v((Jf,tt)=>{"use strict";var{URL:vi,urlToHttpOptions:Si}=require("url"),xi=require("http"),zr=require("https"),pu=bi(),mu=qr(),{Agent:yu,globalAgent:gu}=_e(),_u=Ur(),bu=Ei(),Ci=jr(),Ti=new mu({maxSize:100}),wu=new Map,Eu=(t,e,r)=>{e._httpMessage={shouldKeepAlive:!0};let n=()=>{t.emit("free",e,r)};e.on("free",n);let s=()=>{t.removeSocket(e,r)};e.on("close",s);let i=()=>{let{freeSockets:a}=t;for(let h of Object.values(a))if(h.includes(e)){e.destroy();return}};e.on("timeout",i);let o=()=>{t.removeSocket(e,r),e.off("close",s),e.off("free",n),e.off("timeout",i),e.off("agentRemove",o)};e.on("agentRemove",o),t.emit("free",e,r)},Ri=(t,e=new Map,r=void 0)=>async n=>{let s=`${n.host}:${n.port}:${n.ALPNProtocols.sort()}`;if(!t.has(s)){if(e.has(s))return{alpnProtocol:(await e.get(s)).alpnProtocol};let{path:i}=n;n.path=n.socketPath;let o=pu(n,r);e.set(s,o);try{let a=await o;return t.set(s,a.alpnProtocol),e.delete(s),n.path=i,a}catch(a){throw e.delete(s),n.path=i,a}}return{alpnProtocol:t.get(s)}},Oi=Ri(Ti,wu);tt.exports=async(t,e,r)=>{if(typeof t=="string"?t=Si(new vi(t)):t instanceof vi?t=Si(t):t=b({},t),typeof e=="function"||e===void 0?(r=e,e=t):e=Object.assign(t,e),e.ALPNProtocols=e.ALPNProtocols||["h2","http/1.1"],!Array.isArray(e.ALPNProtocols)||e.ALPNProtocols.length===0)throw new Error("The `ALPNProtocols` option must be an Array with at least one entry");e.protocol=e.protocol||"https:";let n=e.protocol==="https:";e.host=e.hostname||e.host||"localhost",e.session=e.tlsSession,e.servername=e.servername||bu(e.headers&&e.headers.host||e.host),e.port=e.port||(n?443:80),e._defaultAgent=n?zr.globalAgent:xi.globalAgent;let s=e.resolveProtocol||Oi,{agent:i}=e;if(i!==void 0&&i!==!1&&i.constructor.name!=="Object")throw new Error("The `options.agent` can be only an object `http`, `https` or `http2` properties");if(n){e.resolveSocket=!0;let{socket:o,alpnProtocol:a,timeout:h}=await s(e);if(h){o&&o.destroy();let l=new Error(`Timed out resolving ALPN: ${e.timeout} ms`);throw l.code="ETIMEDOUT",l.ms=e.timeout,l}o&&e.createConnection&&(o.destroy(),o=void 0),delete e.resolveSocket;let f=a==="h2";if(i&&(i=f?i.http2:i.https,e.agent=i),i===void 0&&(i=f?gu:zr.globalAgent),o)if(i===!1)o.destroy();else{let l=(f?yu:zr.Agent).prototype.createConnection;i.createConnection===l?f?e._reuseSocket=o:Eu(i,o,e):o.destroy()}if(f)return Ci(new _u(e,r))}else i&&(e.agent=i.http);return Ci(xi.request(e,r))};tt.exports.protocolCache=Ti;tt.exports.resolveProtocol=Oi;tt.exports.createResolveProtocol=Ri});var Fr=v((Kf,Pi)=>{"use strict";var vu=require("stream"),Su=require("tls"),xu=new Su.TLSSocket(new vu.PassThrough)._handle._parentWrap.constructor;Pi.exports=xu});var Mr=v((Qf,qi)=>{"use strict";var Ai=class extends Error{constructor(e){super(`The proxy server rejected the request with status code ${e}`);this.statusCode=e}};qi.exports=Ai});var Hi=v((Yf,ji)=>{"use strict";var Cu=(t,e,r)=>{if(!r.some(s=>typeof s==="string"?typeof e===s:e instanceof s)){let s=r.map(i=>typeof i=="string"?i:i.name);throw new TypeError(`Expected '${t}' to be a type of ${s.join(" or ")}, got ${typeof e}`)}};ji.exports=Cu});var $r=v((Xf,Ii)=>{"use strict";var{URL:Li}=require("url"),Ot=Hi();Ii.exports=(t,e)=>{Ot("proxyOptions",e,["object"]),Ot("proxyOptions.headers",e.headers,["object","undefined"]),Ot("proxyOptions.raw",e.raw,["boolean","undefined"]),Ot("proxyOptions.url",e.url,[Li,"string"]);let r=new Li(e.url);t.proxyOptions=O(b({raw:!0},e),{headers:b({},e.headers),url:r})}});var kt=v((Zf,Di)=>{"use strict";Di.exports=t=>{let{username:e,password:r}=t.proxyOptions.url;if(e||r){let n=`${e}:${r}`,s=`Basic ${Buffer.from(n).toString("base64")}`;return{"proxy-authorization":s,authorization:s}}return{}}});var $i=v((ed,Mi)=>{"use strict";var Tu=require("tls"),Ru=require("http"),Bi=require("https"),Ou=Fr(),{globalAgent:ku}=_e(),Pu=Mr(),Ni=$r(),Au=kt(),Ui=(t,e,r)=>{(async()=>{try{let{proxyOptions:n}=t,{url:s,headers:i,raw:o}=n,a=await ku.request(s,n,O(b(b({},Au(t)),i),{":method":"CONNECT",":authority":`${e.host}:${e.port}`}));a.once("error",r),a.once("response",h=>{let f=h[":status"];if(f!==200){r(new Pu(f));return}let l=t instanceof Bi.Agent;if(o&&l){e.socket=a;let p=Tu.connect(e);p.once("close",()=>{a.destroy()}),r(null,p);return}let m=new Ou(a);m.encrypted=!1,m._handle.getpeername=p=>{p.family=void 0,p.address=void 0,p.port=void 0},r(null,m)})}catch(n){r(n)}})()},zi=class extends Ru.Agent{constructor(e){super(e);Ni(this,e.proxyOptions)}createConnection(e,r){Ui(this,e,r)}},Fi=class extends Bi.Agent{constructor(e){super(e);Ni(this,e.proxyOptions)}createConnection(e,r){Ui(this,e,r)}};Mi.exports={HttpOverHttp2:zi,HttpsOverHttp2:Fi}});var Vr=v((td,Wi)=>{"use strict";var{Agent:qu}=_e(),ju=Fr(),Hu=Mr(),Lu=$r(),Vi=class extends qu{constructor(e){super(e);Lu(this,e.proxyOptions)}async createConnection(e,r){let n=`${e.hostname}:${e.port||443}`,[s,i]=await this._getProxyStream(n);if(i!==200)throw new Hu(i);if(this.proxyOptions.raw)r.socket=s;else{let o=new ju(s);return o.encrypted=!1,o._handle.getpeername=a=>{a.family=void 0,a.address=void 0,a.port=void 0},o}return super.createConnection(e,r)}};Wi.exports=Vi});var Ki=v((rd,Ji)=>{"use strict";var{globalAgent:Iu}=_e(),Du=Vr(),Bu=kt(),Nu=t=>new Promise((e,r)=>{t.once("error",r),t.once("response",n=>{t.off("error",r),e(n[":status"])})}),Gi=class extends Du{async _getProxyStream(e){let{proxyOptions:r}=this,n=O(b(b({},Bu(this)),r.headers),{":method":"CONNECT",":authority":e}),s=await Iu.request(r.url,r,n),i=await Nu(s);return[s,i]}};Ji.exports=Gi});var Yi=v((nd,Qi)=>{"use strict";var Uu=require("http"),zu=require("https"),Fu=Vr(),Mu=kt(),$u=t=>new Promise((e,r)=>{let n=(s,i,o)=>{i.unshift(o),t.off("error",r),e([i,s.statusCode])};t.once("error",r),t.once("connect",n)}),Wr=class extends Fu{async _getProxyStream(e){let{proxyOptions:r}=this,{url:n,headers:s}=this.proxyOptions,o=(n.protocol==="https:"?zu:Uu).request(O(b({},r),{hostname:n.hostname,port:n.port,path:e,headers:O(b(b({},Mu(this)),s),{host:e}),method:"CONNECT"})).end();return $u(o)}};Qi.exports={Http2OverHttp:Wr,Http2OverHttps:Wr}});var Zi=v((sd,Xi)=>{"use strict";var Vu=require("http2"),{Agent:Wu,globalAgent:Gu}=_e(),Gr=Ur(),Ju=Lr(),Ku=ki(),{HttpOverHttp2:Qu,HttpsOverHttp2:Yu}=$i(),Xu=Ki(),{Http2OverHttp:Zu,Http2OverHttps:eh}=Yi(),th=Ir(),rh=Dr(),nh=(t,e,r)=>new Gr(t,e,r),sh=(t,e,r)=>{let n=new Gr(t,e,r);return n.end(),n};Xi.exports=O(b({},Vu),{ClientRequest:Gr,IncomingMessage:Ju,Agent:Wu,globalAgent:Gu,request:nh,get:sh,auto:Ku,proxies:{HttpOverHttp2:Qu,HttpsOverHttp2:Yu,Http2OverHttp2:Xu,Http2OverHttp:Zu,Http2OverHttps:eh},validateHeaderName:th,validateHeaderValue:rh})});var Ch={};Bo(Ch,{default:()=>Ro});var C=require("@raycast/api");var R=require("react");function mn(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{f(n.next(l))}catch(m){o(m)}}function h(l){try{f(n.throw(l))}catch(m){o(m)}}function f(l){l.done?i(l.value):s(l.value).then(a,h)}f((n=n.apply(t,e||[])).next())})}function yn(t,e){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(f){return function(l){return h([f,l])}}function h(f){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,s&&(i=f[0]&2?s.return:f[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,f[1])).done)return i;switch(s=0,i&&(f=[f[0]&2,i.value]),f[0]){case 0:case 1:i=f;break;case 4:return r.label++,{value:f[1],done:!1};case 5:r.label++,s=f[1],f=[0];continue;case 7:f=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(f[0]===6||f[0]===2)){r=0;continue}if(f[0]===3&&(!i||f[1]>i[0]&&f[1]<i[3])){r.label=f[1];break}if(f[0]===6&&r.label<i[1]){r.label=i[1],i=f;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(f);break}i[2]&&r.ops.pop(),r.trys.pop();continue}f=e.call(t,r)}catch(l){f=[6,l],s=0}finally{n=i=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}var Z=function(){},B=Z(),Le=Object,$=function(t){return t===B},Be=function(t){return typeof t=="function"},re=function(t,e){return Le.assign({},t,e)},Jt="undefined",Kt=function(){return typeof window!=Jt},Uo=function(){return typeof document!=Jt},zo=function(){return Kt()&&typeof window.requestAnimationFrame!=Jt},at=new WeakMap,Fo=0,Ne=function(t){var e=typeof t,r=t&&t.constructor,n=r==Date,s,i;if(Le(t)===t&&!n&&r!=RegExp){if(s=at.get(t),s)return s;if(s=++Fo+"~",at.set(t,s),r==Array){for(s="@",i=0;i<t.length;i++)s+=Ne(t[i])+",";at.set(t,s)}if(r==Le){s="#";for(var o=Le.keys(t).sort();!$(i=o.pop());)$(t[i])||(s+=i+":"+Ne(t[i])+",");at.set(t,s)}}else s=n?t.toJSON():e=="symbol"?t.toString():e=="string"?JSON.stringify(t):""+t;return s},Mt=!0,Mo=function(){return Mt},gn=Kt(),Qt=Uo(),$t=gn&&window.addEventListener?window.addEventListener.bind(window):Z,$o=Qt?document.addEventListener.bind(document):Z,Vt=gn&&window.removeEventListener?window.removeEventListener.bind(window):Z,Vo=Qt?document.removeEventListener.bind(document):Z,Wo=function(){var t=Qt&&document.visibilityState;return $(t)||t!=="hidden"},Go=function(t){return $o("visibilitychange",t),$t("focus",t),function(){Vo("visibilitychange",t),Vt("focus",t)}},Jo=function(t){var e=function(){Mt=!0,t()},r=function(){Mt=!1};return $t("online",e),$t("offline",r),function(){Vt("online",e),Vt("offline",r)}},Ko={isOnline:Mo,isVisible:Wo},Qo={initFocus:Go,initReconnect:Jo},ct=!Kt()||"Deno"in window,Yo=function(t){return zo()?window.requestAnimationFrame(t):setTimeout(t,1)},Ie=ct?R.useEffect:R.useLayoutEffect,zt=typeof navigator<"u"&&navigator.connection,dn=!ct&&zt&&(["slow-2g","2g"].includes(zt.effectiveType)||zt.saveData),_n=function(t){if(Be(t))try{t=t()}catch{t=""}var e=[].concat(t);t=typeof t=="string"?t:(Array.isArray(t)?t.length:t)?Ne(t):"";var r=t?"$swr$"+t:"";return[t,e,r]},de=new WeakMap,bn=0,wn=1,En=2,De=function(t,e,r,n,s,i,o){o===void 0&&(o=!0);var a=de.get(t),h=a[0],f=a[1],l=a[3],m=h[e],p=f[e];if(o&&p)for(var w=0;w<p.length;++w)p[w](r,n,s);return i&&(delete l[e],m&&m[0])?m[0](En).then(function(){return t.get(e)}):t.get(e)},Xo=0,Wt=function(){return++Xo},vn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return mn(void 0,void 0,void 0,function(){var r,n,s,i,o,a,h,f,l,m,p,w,S,d,y,_,x,E,T,k;return yn(this,function(L){switch(L.label){case 0:if(r=t[0],n=t[1],s=t[2],i=t[3],o=typeof i=="boolean"?{revalidate:i}:i||{},a=o.populateCache!==!1,h=o.revalidate!==!1,f=o.rollbackOnError!==!1,l=o.optimisticData,m=_n(n),p=m[0],w=m[2],!p)return[2];if(S=de.get(r),d=S[2],t.length<3)return[2,De(r,p,r.get(p),B,B,h,a)];if(y=s,x=Wt(),d[p]=[x,0],E=!$(l),T=r.get(p),E&&(r.set(p,l),De(r,p,l)),Be(y))try{y=y(r.get(p))}catch(Q){_=Q}return y&&Be(y.then)?[4,y.catch(function(Q){_=Q})]:[3,2];case 1:if(y=L.sent(),x!==d[p][0]){if(_)throw _;return[2,y]}else _&&E&&f&&(a=!0,y=T,r.set(p,T));L.label=2;case 2:return a&&(_||r.set(p,y),r.set(w,re(r.get(w),{error:_}))),d[p][1]=Wt(),[4,De(r,p,y,_,B,h,a)];case 3:if(k=L.sent(),_)throw _;return[2,a?k:y]}})})},ln=function(t,e){for(var r in t)t[r][0]&&t[r][0](e)},Sn=function(t,e){if(!de.has(t)){var r=re(Qo,e),n={},s=vn.bind(B,t),i=Z;if(de.set(t,[n,{},{},{},s]),!ct){var o=r.initFocus(setTimeout.bind(B,ln.bind(B,n,bn))),a=r.initReconnect(setTimeout.bind(B,ln.bind(B,n,wn)));i=function(){o&&o(),a&&a(),de.delete(t)}}return[t,s,i]}return[t,de.get(t)[4]]},Zo=function(t,e,r,n,s){var i=r.errorRetryCount,o=s.retryCount,a=~~((Math.random()+.5)*(1<<(o<8?o:8)))*r.errorRetryInterval;!$(i)&&o>i||setTimeout(n,a,s)},xn=Sn(new Map),Cn=xn[0],ea=xn[1],Tn=re({onLoadingSlow:Z,onSuccess:Z,onError:Z,onErrorRetry:Zo,onDiscarded:Z,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:dn?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:dn?5e3:3e3,compare:function(t,e){return Ne(t)==Ne(e)},isPaused:function(){return!1},cache:Cn,mutate:ea,fallback:{}},Ko),Rn=function(t,e){var r=re(t,e);if(e){var n=t.use,s=t.fallback,i=e.use,o=e.fallback;n&&i&&(r.use=n.concat(i)),s&&o&&(r.fallback=re(s,o))}return r},Gt=(0,R.createContext)({}),ta=function(t){var e=t.value,r=Rn((0,R.useContext)(Gt),e),n=e&&e.provider,s=(0,R.useState)(function(){return n?Sn(n(r.cache||Cn),e):B})[0];return s&&(r.cache=s[0],r.mutate=s[1]),Ie(function(){return s?s[2]:B},[]),(0,R.createElement)(Gt.Provider,re(t,{value:r}))},ra=function(t,e){var r=(0,R.useState)({})[1],n=(0,R.useRef)(t),s=(0,R.useRef)({data:!1,error:!1,isValidating:!1}),i=(0,R.useCallback)(function(o){var a=!1,h=n.current;for(var f in o){var l=f;h[l]!==o[l]&&(h[l]=o[l],s.current[l]&&(a=!0))}a&&!e.current&&r({})},[]);return Ie(function(){n.current=t}),[n,s.current,i]},na=function(t){return Be(t[1])?[t[0],t[1],t[2]||{}]:[t[0],null,(t[1]===null?t[2]:t[1])||{}]},sa=function(){return re(Tn,(0,R.useContext)(Gt))},ia=function(t){return function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var s=sa(),i=na(r),o=i[0],a=i[1],h=i[2],f=Rn(s,h),l=t,m=f.use;if(m)for(var p=m.length;p-- >0;)l=m[p](l);return l(o,a||f.fetcher,f)}},pn=function(t,e,r){var n=e[t]||(e[t]=[]);return n.push(r),function(){var s=n.indexOf(r);s>=0&&(n[s]=n[n.length-1],n.pop())}},Ft={dedupe:!0},oa=function(t,e,r){var n=r.cache,s=r.compare,i=r.fallbackData,o=r.suspense,a=r.revalidateOnMount,h=r.refreshInterval,f=r.refreshWhenHidden,l=r.refreshWhenOffline,m=de.get(n),p=m[0],w=m[1],S=m[2],d=m[3],y=_n(t),_=y[0],x=y[1],E=y[2],T=(0,R.useRef)(!1),k=(0,R.useRef)(!1),L=(0,R.useRef)(_),Q=(0,R.useRef)(e),Re=(0,R.useRef)(r),j=function(){return Re.current},Lt=function(){return j().isVisible()&&j().isOnline()},it=function(J){return n.set(E,re(n.get(E),J))},rn=n.get(_),Oo=$(i)?r.fallback[_]:i,te=$(rn)?Oo:rn,nn=n.get(E)||{},Oe=nn.error,sn=function(){return $(a)?j().isPaused()?!1:o?!$(te):$(te)||r.revalidateIfStale:a},ko=function(){return!_||!e?!1:nn.isValidating?!0:!T.current&&sn()},It=ko(),Dt=ra({data:te,error:Oe,isValidating:It},k),we=Dt[0],Bt=Dt[1],ot=Dt[2],fe=(0,R.useCallback)(function(J){return mn(void 0,void 0,void 0,function(){var W,G,K,ke,Pe,Y,N,ae,X,Nt,Ae,qe,Ut;return yn(this,function(je){switch(je.label){case 0:if(W=Q.current,!_||!W||k.current||j().isPaused())return[2,!1];ke=!0,Pe=J||{},Y=!d[_]||!Pe.dedupe,N=function(){return!k.current&&_===L.current&&T.current},ae=function(){var on=d[_];on&&on[1]===K&&delete d[_]},X={isValidating:!1},Nt=function(){it({isValidating:!1}),N()&&ot(X)},it({isValidating:!0}),ot({isValidating:!0}),je.label=1;case 1:return je.trys.push([1,3,,4]),Y&&(De(n,_,we.current.data,we.current.error,!0),r.loadingTimeout&&!n.get(_)&&setTimeout(function(){ke&&N()&&j().onLoadingSlow(_,r)},r.loadingTimeout),d[_]=[W.apply(void 0,x),Wt()]),Ut=d[_],G=Ut[0],K=Ut[1],[4,G];case 2:return G=je.sent(),Y&&setTimeout(ae,r.dedupingInterval),!d[_]||d[_][1]!==K?(Y&&N()&&j().onDiscarded(_),[2,!1]):(it({error:B}),X.error=B,Ae=S[_],!$(Ae)&&(K<=Ae[0]||K<=Ae[1]||Ae[1]===0)?(Nt(),Y&&N()&&j().onDiscarded(_),[2,!1]):(s(we.current.data,G)?X.data=we.current.data:X.data=G,s(n.get(_),G)||n.set(_,G),Y&&N()&&j().onSuccess(G,_,r),[3,4]));case 3:return qe=je.sent(),ae(),j().isPaused()||(it({error:qe}),X.error=qe,Y&&N()&&(j().onError(qe,_,r),r.shouldRetryOnError&&Lt()&&j().onErrorRetry(qe,_,r,fe,{retryCount:(Pe.retryCount||0)+1,dedupe:!0}))),[3,4];case 4:return ke=!1,Nt(),N()&&Y&&De(n,_,X.data,X.error,!1),[2,!0]}})})},[_]),Po=(0,R.useCallback)(vn.bind(B,n,function(){return L.current}),[]);if(Ie(function(){Q.current=e,Re.current=r}),Ie(function(){if(!!_){var J=T.current,W=fe.bind(B,Ft),G=function(N,ae,X){ot(re({error:ae,isValidating:X},s(we.current.data,N)?B:{data:N}))},K=0,ke=function(N){if(N==bn){var ae=Date.now();j().revalidateOnFocus&&ae>K&&Lt()&&(K=ae+j().focusThrottleInterval,W())}else if(N==wn)j().revalidateOnReconnect&&Lt()&&W();else if(N==En)return fe()},Pe=pn(_,w,G),Y=pn(_,p,ke);return k.current=!1,L.current=_,T.current=!0,J&&ot({data:te,error:Oe,isValidating:It}),sn()&&($(te)||ct?W():Yo(W)),function(){k.current=!0,Pe(),Y()}}},[_,fe]),Ie(function(){var J;function W(){var K=Be(h)?h(te):h;K&&J!==-1&&(J=setTimeout(G,K))}function G(){!we.current.error&&(f||j().isVisible())&&(l||j().isOnline())?fe(Ft).then(W):W()}return W(),function(){J&&(clearTimeout(J),J=-1)}},[h,f,l,fe]),(0,R.useDebugValue)(te),o&&$(te)&&_)throw Q.current=e,Re.current=r,$(Oe)?fe(Ft):Oe;return{mutate:Po,get data(){return Bt.data=!0,te},get error(){return Bt.error=!0,Oe},get isValidating(){return Bt.isValidating=!0,It}}},Rh=Le.defineProperty(ta,"default",{value:Tn});var On=ia(oa);var go=require("@raycast/api");var M=I(se(),1);var lo=require("node:events"),Te=I(se(),1);var jn=class extends Error{constructor(e){super(e||"Promise was canceled");this.name="CancelError"}get isCanceled(){return!0}},le=class{static fn(e){return(...r)=>new le((n,s,i)=>{r.push(i),e(...r).then(n,s)})}constructor(e){this._cancelHandlers=[],this._isPending=!0,this._isCanceled=!1,this._rejectOnCancel=!0,this._promise=new Promise((r,n)=>{this._reject=n;let s=a=>{(!this._isCanceled||!o.shouldReject)&&(this._isPending=!1,r(a))},i=a=>{this._isPending=!1,n(a)},o=a=>{if(!this._isPending)throw new Error("The `onCancel` handler was attached after the promise settled.");this._cancelHandlers.push(a)};Object.defineProperties(o,{shouldReject:{get:()=>this._rejectOnCancel,set:a=>{this._rejectOnCancel=a}}}),e(s,i,o)})}then(e,r){return this._promise.then(e,r)}catch(e){return this._promise.catch(e)}finally(e){return this._promise.finally(e)}cancel(e){if(!(!this._isPending||this._isCanceled)){if(this._isCanceled=!0,this._cancelHandlers.length>0)try{for(let r of this._cancelHandlers)r()}catch(r){this._reject(r);return}this._rejectOnCancel&&this._reject(new jn(e))}}get isCanceled(){return this._isCanceled}};Object.setPrototypeOf(le.prototype,Promise.prototype);var ht=I(se(),1);function _a(t){return ht.default.object(t)&&"_onResponse"in t}var H=class extends Error{constructor(e,r,n){super(e);if(Object.defineProperty(this,"input",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stack",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"response",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"request",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Error.captureStackTrace(this,this.constructor),this.name="RequestError",this.code=r.code??"ERR_GOT_REQUEST_ERROR",this.input=r.input,_a(n)?(Object.defineProperty(this,"request",{enumerable:!1,value:n}),Object.defineProperty(this,"response",{enumerable:!1,value:n.response}),this.options=n.options):this.options=n,this.timings=this.request?.timings,ht.default.string(r.stack)&&ht.default.string(this.stack)){let s=this.stack.indexOf(this.message)+this.message.length,i=this.stack.slice(s).split(`
`).reverse(),o=r.stack.slice(r.stack.indexOf(r.message)+r.message.length).split(`
`).reverse();for(;o.length>0&&o[0]===i[0];)i.shift();this.stack=`${this.stack.slice(0,s)}${i.reverse().join(`
`)}${o.reverse().join(`
`)}`}}},Yt=class extends H{constructor(e){super(`Redirected ${e.options.maxRedirects} times. Aborting.`,{},e);this.name="MaxRedirectsError",this.code="ERR_TOO_MANY_REDIRECTS"}},ve=class extends H{constructor(e){super(`Response code ${e.statusCode} (${e.statusMessage})`,{},e.request);this.name="HTTPError",this.code="ERR_NON_2XX_3XX_RESPONSE"}},Xt=class extends H{constructor(e,r){super(e.message,e,r);this.name="CacheError",this.code=this.code==="ERR_GOT_REQUEST_ERROR"?"ERR_CACHE_ACCESS":this.code}},ft=class extends H{constructor(e,r){super(e.message,e,r);this.name="UploadError",this.code=this.code==="ERR_GOT_REQUEST_ERROR"?"ERR_UPLOAD":this.code}},Zt=class extends H{constructor(e,r,n){super(e.message,e,n);Object.defineProperty(this,"timings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"event",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="TimeoutError",this.event=e.event,this.timings=r}},dt=class extends H{constructor(e,r){super(e.message,e,r);this.name="ReadError",this.code=this.code==="ERR_GOT_REQUEST_ERROR"?"ERR_READING_RESPONSE_STREAM":this.code}},er=class extends H{constructor(e){super("Retrying",{},e);this.name="RetryError",this.code="ERR_RETRYING"}};var en=I(require("node:process"),1),At=require("node:buffer"),uo=require("node:stream"),qt=require("node:url"),st=I(require("node:http"),1);var Ln=require("events"),In=require("util"),Dn=I(Hn(),1),wa=t=>{if(t.timings)return t.timings;let e={start:Date.now(),socket:void 0,lookup:void 0,connect:void 0,secureConnect:void 0,upload:void 0,response:void 0,end:void 0,error:void 0,abort:void 0,phases:{wait:void 0,dns:void 0,tcp:void 0,tls:void 0,request:void 0,firstByte:void 0,download:void 0,total:void 0}};t.timings=e;let r=o=>{o.once(Ln.errorMonitor,()=>{e.error=Date.now(),e.phases.total=e.error-e.start})};r(t);let n=()=>{e.abort=Date.now(),e.phases.total=e.abort-e.start};t.prependOnceListener("abort",n);let s=o=>{if(e.socket=Date.now(),e.phases.wait=e.socket-e.start,In.types.isProxy(o))return;let a=()=>{e.lookup=Date.now(),e.phases.dns=e.lookup-e.socket};o.prependOnceListener("lookup",a),(0,Dn.default)(o,{connect:()=>{e.connect=Date.now(),e.lookup===void 0&&(o.removeListener("lookup",a),e.lookup=e.connect,e.phases.dns=e.lookup-e.socket),e.phases.tcp=e.connect-e.lookup},secureConnect:()=>{e.secureConnect=Date.now(),e.phases.tls=e.secureConnect-e.connect}})};t.socket?s(t.socket):t.prependOnceListener("socket",s);let i=()=>{e.upload=Date.now(),e.phases.request=e.upload-(e.secureConnect??e.connect)};return t.writableFinished?i():t.prependOnceListener("finish",i),t.prependOnceListener("response",o=>{e.response=Date.now(),e.phases.firstByte=e.response-e.upload,o.timings=e,r(o),o.prependOnceListener("end",()=>{t.off("abort",n),o.off("aborted",n),!e.phases.total&&(e.end=Date.now(),e.phases.download=e.end-e.response,e.phases.total=e.end-e.start)}),o.prependOnceListener("aborted",n)}),e},Bn=wa;var Zr=I(vs(),1),ho=I(Ts(),1),A=I(se(),1),fo=I(ks(),1);var Ps="abcdefghijklmnopqrstuvwxyz0123456789";function bc(){let t=16,e="";for(;t--;)e+=Ps[Math.random()*Ps.length<<0];return e}var As=bc;var wc=t=>Object.prototype.toString.call(t).slice(8,-1).toLowerCase();function Ec(t){if(wc(t)!=="object")return!1;let e=Object.getPrototypeOf(t);return e==null?!0:(e.constructor&&e.constructor.toString())===Object.toString()}var mr=Ec;var vc=t=>String(t).replace(/\r(?!\n)|(?<!\r)\n/g,`\r
`),yr=vc;var Sc=t=>String(t).replace(/\r/g,"%0D").replace(/\n/g,"%0A").replace(/"/g,"%22"),gr=Sc;var xc=t=>typeof t=="function",ie=xc;var me=t=>Boolean(t&&typeof t=="object"&&ie(t.constructor)&&t[Symbol.toStringTag]==="File"&&ie(t.stream)&&t.name!=null&&t.size!=null&&t.lastModified!=null);var _r=t=>Boolean(t&&ie(t.constructor)&&t[Symbol.toStringTag]==="FormData"&&ie(t.append)&&ie(t.getAll)&&ie(t.entries)&&ie(t[Symbol.iterator])),gt=_r;var Me=function(t,e,r,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(t,r):s?s.value=r:e.set(t,r),r},q=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},_t,ce,$e,bt,Ve,ye,We,Ge,wt,br,Cc={enableAdditionalHeaders:!1},wr=class{constructor(e,r,n){if(_t.add(this),ce.set(this,`\r
`),$e.set(this,void 0),bt.set(this,void 0),Ve.set(this,"-".repeat(2)),ye.set(this,new TextEncoder),We.set(this,void 0),Ge.set(this,void 0),wt.set(this,void 0),!_r(e))throw new TypeError("Expected first argument to be a FormData instance.");let s;if(mr(r)?n=r:s=r,s||(s=As()),typeof s!="string")throw new TypeError("Expected boundary argument to be a string.");if(n&&!mr(n))throw new TypeError("Expected options argument to be an object.");Me(this,Ge,e,"f"),Me(this,wt,b(b({},Cc),n),"f"),Me(this,$e,q(this,ye,"f").encode(q(this,ce,"f")),"f"),Me(this,bt,q(this,$e,"f").byteLength,"f"),this.boundary=`form-data-boundary-${s}`,this.contentType=`multipart/form-data; boundary=${this.boundary}`,Me(this,We,q(this,ye,"f").encode(`${q(this,Ve,"f")}${this.boundary}${q(this,Ve,"f")}${q(this,ce,"f").repeat(2)}`),"f"),this.contentLength=String(this.getContentLength()),this.headers=Object.freeze({"Content-Type":this.contentType,"Content-Length":this.contentLength}),Object.defineProperties(this,{boundary:{writable:!1,configurable:!1},contentType:{writable:!1,configurable:!1},contentLength:{writable:!1,configurable:!1},headers:{writable:!1,configurable:!1}})}getContentLength(){let e=0;for(let[r,n]of q(this,Ge,"f")){let s=me(n)?n:q(this,ye,"f").encode(yr(n));e+=q(this,_t,"m",br).call(this,r,s).byteLength,e+=me(s)?s.size:s.byteLength,e+=q(this,bt,"f")}return e+q(this,We,"f").byteLength}*values(){for(let[e,r]of q(this,Ge,"f").entries()){let n=me(r)?r:q(this,ye,"f").encode(yr(r));yield q(this,_t,"m",br).call(this,e,n),yield n,yield q(this,$e,"f")}yield q(this,We,"f")}async*encode(){for(let e of this.values())me(e)?yield*e.stream():yield e}[(ce=new WeakMap,$e=new WeakMap,bt=new WeakMap,Ve=new WeakMap,ye=new WeakMap,We=new WeakMap,Ge=new WeakMap,wt=new WeakMap,_t=new WeakSet,br=function(r,n){let s="";return s+=`${q(this,Ve,"f")}${this.boundary}${q(this,ce,"f")}`,s+=`Content-Disposition: form-data; name="${gr(r)}"`,me(n)&&(s+=`; filename="${gr(n.name)}"${q(this,ce,"f")}`,s+=`Content-Type: ${n.type||"application/octet-stream"}`),q(this,wt,"f").enableAdditionalHeaders===!0&&(s+=`${q(this,ce,"f")}Content-Length: ${me(n)?n.size:n.byteLength}`),q(this,ye,"f").encode(`${s}${q(this,ce,"f").repeat(2)}`)},Symbol.iterator)](){return this.values()}[Symbol.asyncIterator](){return this.encode()}};var qs=require("node:buffer"),js=require("node:util"),vr=I(se(),1);var Er=I(se(),1);function Je(t){return Er.default.nodeStream(t)&&Er.default.function_(t.getBoundary)}async function Sr(t,e){if(e&&"content-length"in e)return Number(e["content-length"]);if(!t)return 0;if(vr.default.string(t))return qs.Buffer.byteLength(t);if(vr.default.buffer(t))return t.length;if(Je(t))return(0,js.promisify)(t.getLength.bind(t))()}function Ke(t,e,r){let n={};for(let s of r){let i=(...o)=>{e.emit(s,...o)};n[s]=i,t.on(s,i)}return()=>{for(let[s,i]of Object.entries(n))t.off(s,i)}}var Ls=I(require("node:net"),1);function xr(){let t=[];return{once(e,r,n){e.once(r,n),t.push({origin:e,event:r,fn:n})},unhandleAll(){for(let e of t){let{origin:r,event:n,fn:s}=e;r.removeListener(n,s)}t.length=0}}}var Hs=Symbol("reentry"),Tc=()=>{},Et=class extends Error{constructor(e,r){super(`Timeout awaiting '${r}' for ${e}ms`);Object.defineProperty(this,"event",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="TimeoutError",this.code="ETIMEDOUT"}};function Cr(t,e,r){if(Hs in t)return Tc;t[Hs]=!0;let n=[],{once:s,unhandleAll:i}=xr(),o=(d,y,_)=>{let x=setTimeout(y,d,d,_);x.unref?.();let E=()=>{clearTimeout(x)};return n.push(E),E},{host:a,hostname:h}=r,f=(d,y)=>{t.destroy(new Et(d,y))},l=()=>{for(let d of n)d();i()};if(t.once("error",d=>{if(l(),t.listenerCount("error")===0)throw d}),typeof e.request<"u"){let d=o(e.request,f,"request");s(t,"response",y=>{s(y,"end",d)})}if(typeof e.socket<"u"){let{socket:d}=e,y=()=>{f(d,"socket")};t.setTimeout(d,y),n.push(()=>{t.removeListener("timeout",y)})}let m=typeof e.lookup<"u",p=typeof e.connect<"u",w=typeof e.secureConnect<"u",S=typeof e.send<"u";return(m||p||w||S)&&s(t,"socket",d=>{let{socketPath:y}=t;if(d.connecting){let _=Boolean(y??Ls.default.isIP(h??a??"")!==0);if(m&&!_&&typeof d.address().address>"u"){let x=o(e.lookup,f,"lookup");s(d,"lookup",x)}if(p){let x=()=>o(e.connect,f,"connect");_?s(d,"connect",x()):s(d,"lookup",E=>{E===null&&s(d,"connect",x())})}w&&r.protocol==="https:"&&s(d,"connect",()=>{let x=o(e.secureConnect,f,"secureConnect");s(d,"secureConnect",x)})}if(S){let _=()=>o(e.send,f,"send");d.connecting?s(d,"connect",()=>{s(t,"upload-complete",_())}):s(t,"upload-complete",_())}}),typeof e.response<"u"&&s(t,"upload-complete",()=>{let d=o(e.response,f,"response");s(t,"response",d)}),typeof e.read<"u"&&s(t,"response",d=>{let y=o(e.read,f,"read");s(d,"end",y)}),l}var Tr=I(se(),1);function Rr(t){t=t;let e={protocol:t.protocol,hostname:Tr.default.string(t.hostname)&&t.hostname.startsWith("[")?t.hostname.slice(1,-1):t.hostname,host:t.host,hash:t.hash,search:t.search,pathname:t.pathname,href:t.href,path:`${t.pathname||""}${t.search||""}`};return Tr.default.string(t.port)&&t.port.length>0&&(e.port=Number(t.port)),(t.username||t.password)&&(e.auth=`${t.username||""}:${t.password||""}`),e}var vt=class{constructor(){Object.defineProperty(this,"weakMap",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"map",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.weakMap=new WeakMap,this.map=new Map}set(e,r){typeof e=="object"?this.weakMap.set(e,r):this.map.set(e,r)}get(e){return typeof e=="object"?this.weakMap.get(e):this.map.get(e)}has(e){return typeof e=="object"?this.weakMap.has(e):this.map.has(e)}};var Rc=({attemptCount:t,retryOptions:e,error:r,retryAfter:n,computedValue:s})=>{if(r.name==="RetryError")return 1;if(t>e.limit)return 0;let i=e.methods.includes(r.options.method),o=e.errorCodes.includes(r.code),a=r.response&&e.statusCodes.includes(r.response.statusCode);if(!i||!o&&!a)return 0;if(r.response){if(n)return n>s?0:n;if(r.response.statusCode===413)return 0}let h=Math.random()*e.noise;return Math.min(2**(t-1)*1e3,e.backoffLimit)+h},Is=Rc;var ro=I(require("node:process"),1),rt=require("node:util"),oe=require("node:url"),no=require("node:tls"),so=I(require("node:http"),1),io=I(require("node:https"),1),c=I(se(),1);function St(t){return Object.fromEntries(Object.entries(t).map(([e,r])=>[e.toLowerCase(),r]))}var oo=I(Ms(),1),ao=I(Zi(),1);function Jr(t){let e=[],r=t.split(",");for(let n of r){let[s,...i]=n.split(";"),o=s.trim();if(o[0]!=="<"||o[o.length-1]!==">")throw new Error(`Invalid format of the Link header reference: ${o}`);let a=o.slice(1,-1),h={};if(i.length===0)throw new Error(`Unexpected end of Link header parameters: ${i.join(";")}`);for(let f of i){let l=f.trim(),m=l.indexOf("=");if(m===-1)throw new Error(`Failed to parse Link header: ${t}`);let p=l.slice(0,m).trim(),w=l.slice(m+1).trim();h[p]=w}e.push({reference:a,parameters:h})}return e}var[eo,ih]=ro.default.versions.node.split(".").map(t=>Number(t));function oh(t){for(let e in t){let r=t[e];c.assert.any([c.default.string,c.default.number,c.default.boolean,c.default.null_,c.default.undefined],r)}}var ah=new Map,Pt,ch=()=>Pt||(Pt=new oo.default,Pt),uh={request:void 0,agent:{http:void 0,https:void 0,http2:void 0},h2session:void 0,decompress:!0,timeout:{connect:void 0,lookup:void 0,read:void 0,request:void 0,response:void 0,secureConnect:void 0,send:void 0,socket:void 0},prefixUrl:"",body:void 0,form:void 0,json:void 0,cookieJar:void 0,ignoreInvalidCookies:!1,searchParams:void 0,dnsLookup:void 0,dnsCache:void 0,context:{},hooks:{init:[],beforeRequest:[],beforeError:[],beforeRedirect:[],beforeRetry:[],afterResponse:[]},followRedirect:!0,maxRedirects:10,cache:void 0,throwHttpErrors:!0,username:"",password:"",http2:!1,allowGetBody:!1,headers:{"user-agent":"got (https://github.com/sindresorhus/got)"},methodRewriting:!1,dnsLookupIpVersion:void 0,parseJson:JSON.parse,stringifyJson:JSON.stringify,retry:{limit:2,methods:["GET","PUT","HEAD","DELETE","OPTIONS","TRACE"],statusCodes:[408,413,429,500,502,503,504,521,522,524],errorCodes:["ETIMEDOUT","ECONNRESET","EADDRINUSE","ECONNREFUSED","EPIPE","ENOTFOUND","ENETUNREACH","EAI_AGAIN"],maxRetryAfter:void 0,calculateDelay:({computedValue:t})=>t,backoffLimit:Number.POSITIVE_INFINITY,noise:100},localAddress:void 0,method:"GET",createConnection:void 0,cacheOptions:{shared:void 0,cacheHeuristic:void 0,immutableMinTimeToLive:void 0,ignoreCargoCult:void 0},https:{alpnProtocols:void 0,rejectUnauthorized:void 0,checkServerIdentity:void 0,certificateAuthority:void 0,key:void 0,certificate:void 0,passphrase:void 0,pfx:void 0,ciphers:void 0,honorCipherOrder:void 0,minVersion:void 0,maxVersion:void 0,signatureAlgorithms:void 0,tlsSessionLifetime:void 0,dhparam:void 0,ecdhCurve:void 0,certificateRevocationLists:void 0},encoding:void 0,resolveBodyOnly:!1,isStream:!1,responseType:"text",url:void 0,pagination:{transform:t=>t.request.options.responseType==="json"?t.body:JSON.parse(t.body),paginate:({response:t})=>{let e=t.headers.link;if(typeof e!="string"||e.trim()==="")return!1;let n=Jr(e).find(s=>s.parameters.rel==="next"||s.parameters.rel==='"next"');return n?{url:new oe.URL(n.reference,t.url)}:!1},filter:()=>!0,shouldContinue:()=>!0,countLimit:Number.POSITIVE_INFINITY,backoff:0,requestLimit:1e4,stackAllItems:!1},setHost:!0,maxHeaderSize:void 0},hh=t=>{let{hooks:e,retry:r}=t,n=O(b({},t),{context:b({},t.context),cacheOptions:b({},t.cacheOptions),https:b({},t.https),agent:b({},t.agent),headers:b({},t.headers),retry:O(b({},r),{errorCodes:[...r.errorCodes],methods:[...r.methods],statusCodes:[...r.statusCodes]}),timeout:b({},t.timeout),hooks:{init:[...e.init],beforeRequest:[...e.beforeRequest],beforeError:[...e.beforeError],beforeRedirect:[...e.beforeRedirect],beforeRetry:[...e.beforeRetry],afterResponse:[...e.afterResponse]},searchParams:t.searchParams?new oe.URLSearchParams(t.searchParams):void 0,pagination:b({},t.pagination)});return n.url!==void 0&&(n.prefixUrl=""),n},fh=t=>{let{hooks:e,retry:r}=t,n=b({},t);return c.default.object(t.context)&&(n.context=b({},t.context)),c.default.object(t.cacheOptions)&&(n.cacheOptions=b({},t.cacheOptions)),c.default.object(t.https)&&(n.https=b({},t.https)),c.default.object(t.cacheOptions)&&(n.cacheOptions=b({},n.cacheOptions)),c.default.object(t.agent)&&(n.agent=b({},t.agent)),c.default.object(t.headers)&&(n.headers=b({},t.headers)),c.default.object(r)&&(n.retry=b({},r),c.default.array(r.errorCodes)&&(n.retry.errorCodes=[...r.errorCodes]),c.default.array(r.methods)&&(n.retry.methods=[...r.methods]),c.default.array(r.statusCodes)&&(n.retry.statusCodes=[...r.statusCodes])),c.default.object(t.timeout)&&(n.timeout=b({},t.timeout)),c.default.object(e)&&(n.hooks=b({},e),c.default.array(e.init)&&(n.hooks.init=[...e.init]),c.default.array(e.beforeRequest)&&(n.hooks.beforeRequest=[...e.beforeRequest]),c.default.array(e.beforeError)&&(n.hooks.beforeError=[...e.beforeError]),c.default.array(e.beforeRedirect)&&(n.hooks.beforeRedirect=[...e.beforeRedirect]),c.default.array(e.beforeRetry)&&(n.hooks.beforeRetry=[...e.beforeRetry]),c.default.array(e.afterResponse)&&(n.hooks.afterResponse=[...e.afterResponse])),c.default.object(t.pagination)&&(n.pagination=b({},t.pagination)),n},dh=t=>{let e=[t.timeout.socket,t.timeout.connect,t.timeout.lookup,t.timeout.request,t.timeout.secureConnect].filter(r=>typeof r=="number");if(e.length>0)return Math.min(...e)},to=(t,e,r)=>{let n=t.hooks?.init;if(n)for(let s of n)s(e,r)},F=class{constructor(e,r,n){if(Object.defineProperty(this,"_unixOptions",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_internals",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_merging",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_init",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),c.assert.any([c.default.string,c.default.urlInstance,c.default.object,c.default.undefined],e),c.assert.any([c.default.object,c.default.undefined],r),c.assert.any([c.default.object,c.default.undefined],n),e instanceof F||r instanceof F)throw new TypeError("The defaults must be passed as the third argument");this._internals=hh(n?._internals??n??uh),this._init=[...n?._init??[]],this._merging=!1,this._unixOptions=void 0;try{if(c.default.plainObject(e))try{this.merge(e),this.merge(r)}finally{this.url=e.url}else try{this.merge(r)}finally{if(r?.url!==void 0)if(e===void 0)this.url=r.url;else throw new TypeError("The `url` option is mutually exclusive with the `input` argument");else e!==void 0&&(this.url=e)}}catch(s){throw s.options=this,s}}merge(e){if(!!e){if(e instanceof F){for(let r of e._init)this.merge(r);return}e=fh(e),to(this,e,this),to(e,e,this),this._merging=!0,"isStream"in e&&(this.isStream=e.isStream);try{let r=!1;for(let n in e)if(!(n==="mutableDefaults"||n==="handlers")&&n!=="url"){if(!(n in this))throw new Error(`Unexpected option: ${n}`);this[n]=e[n],r=!0}r&&this._init.push(e)}finally{this._merging=!1}}}get request(){return this._internals.request}set request(e){c.assert.any([c.default.function_,c.default.undefined],e),this._internals.request=e}get agent(){return this._internals.agent}set agent(e){c.assert.plainObject(e);for(let r in e){if(!(r in this._internals.agent))throw new TypeError(`Unexpected agent option: ${r}`);c.assert.any([c.default.object,c.default.undefined],e[r])}this._merging?Object.assign(this._internals.agent,e):this._internals.agent=b({},e)}get h2session(){return this._internals.h2session}set h2session(e){this._internals.h2session=e}get decompress(){return this._internals.decompress}set decompress(e){c.assert.boolean(e),this._internals.decompress=e}get timeout(){return this._internals.timeout}set timeout(e){c.assert.plainObject(e);for(let r in e){if(!(r in this._internals.timeout))throw new Error(`Unexpected timeout option: ${r}`);c.assert.any([c.default.number,c.default.undefined],e[r])}this._merging?Object.assign(this._internals.timeout,e):this._internals.timeout=b({},e)}get prefixUrl(){return this._internals.prefixUrl}set prefixUrl(e){if(c.assert.any([c.default.string,c.default.urlInstance],e),e===""){this._internals.prefixUrl="";return}if(e=e.toString(),e.endsWith("/")||(e+="/"),this._internals.prefixUrl&&this._internals.url){let{href:r}=this._internals.url;this._internals.url.href=e+r.slice(this._internals.prefixUrl.length)}this._internals.prefixUrl=e}get body(){return this._internals.body}set body(e){c.assert.any([c.default.string,c.default.buffer,c.default.nodeStream,c.default.generator,c.default.asyncGenerator,gt,c.default.undefined],e),c.default.nodeStream(e)&&c.assert.truthy(e.readable),e!==void 0&&(c.assert.undefined(this._internals.form),c.assert.undefined(this._internals.json)),this._internals.body=e}get form(){return this._internals.form}set form(e){c.assert.any([c.default.plainObject,c.default.undefined],e),e!==void 0&&(c.assert.undefined(this._internals.body),c.assert.undefined(this._internals.json)),this._internals.form=e}get json(){return this._internals.json}set json(e){c.assert.any([c.default.object,c.default.undefined],e),e!==void 0&&(c.assert.undefined(this._internals.body),c.assert.undefined(this._internals.form)),this._internals.json=e}get url(){return this._internals.url}set url(e){if(c.assert.any([c.default.string,c.default.urlInstance,c.default.undefined],e),e===void 0){this._internals.url=void 0;return}if(c.default.string(e)&&e.startsWith("/"))throw new Error("`url` must not start with a slash");let r=`${this.prefixUrl}${e.toString()}`,n=new oe.URL(r);if(this._internals.url=n,decodeURI(r),n.protocol==="unix:"&&(n.href=`http://unix${n.pathname}${n.search}`),n.protocol!=="http:"&&n.protocol!=="https:"){let s=new Error(`Unsupported protocol: ${n.protocol}`);throw s.code="ERR_UNSUPPORTED_PROTOCOL",s}if(this._internals.username&&(n.username=this._internals.username,this._internals.username=""),this._internals.password&&(n.password=this._internals.password,this._internals.password=""),this._internals.searchParams&&(n.search=this._internals.searchParams.toString(),this._internals.searchParams=void 0),n.hostname==="unix"){let s=/(?<socketPath>.+?):(?<path>.+)/.exec(`${n.pathname}${n.search}`);if(s?.groups){let{socketPath:i,path:o}=s.groups;this._unixOptions={socketPath:i,path:o,host:""}}else this._unixOptions=void 0;return}this._unixOptions=void 0}get cookieJar(){return this._internals.cookieJar}set cookieJar(e){if(c.assert.any([c.default.object,c.default.undefined],e),e===void 0){this._internals.cookieJar=void 0;return}let{setCookie:r,getCookieString:n}=e;c.assert.function_(r),c.assert.function_(n),r.length===4&&n.length===0?(r=(0,rt.promisify)(r.bind(e)),n=(0,rt.promisify)(n.bind(e)),this._internals.cookieJar={setCookie:r,getCookieString:n}):this._internals.cookieJar=e}get ignoreInvalidCookies(){return this._internals.ignoreInvalidCookies}set ignoreInvalidCookies(e){c.assert.boolean(e),this._internals.ignoreInvalidCookies=e}get searchParams(){return this._internals.url?this._internals.url.searchParams:(this._internals.searchParams===void 0&&(this._internals.searchParams=new oe.URLSearchParams),this._internals.searchParams)}set searchParams(e){c.assert.any([c.default.string,c.default.object,c.default.undefined],e);let r=this._internals.url;if(e===void 0){this._internals.searchParams=void 0,r&&(r.search="");return}let n=this.searchParams,s;if(c.default.string(e))s=new oe.URLSearchParams(e);else if(e instanceof oe.URLSearchParams)s=e;else{oh(e),s=new oe.URLSearchParams;for(let i in e){let o=e[i];o===null?s.append(i,""):o===void 0?n.delete(i):s.append(i,o)}}if(this._merging){for(let i of s.keys())n.delete(i);for(let[i,o]of s)n.append(i,o)}else r?r.search=n.toString():this._internals.searchParams=n}get searchParameters(){throw new Error("The `searchParameters` option does not exist. Use `searchParams` instead.")}set searchParameters(e){throw new Error("The `searchParameters` option does not exist. Use `searchParams` instead.")}get dnsLookup(){return this._internals.dnsLookup}set dnsLookup(e){c.assert.any([c.default.function_,c.default.undefined],e),this._internals.dnsLookup=e}get dnsCache(){return this._internals.dnsCache}set dnsCache(e){c.assert.any([c.default.object,c.default.boolean,c.default.undefined],e),e===!0?this._internals.dnsCache=ch():e===!1?this._internals.dnsCache=void 0:this._internals.dnsCache=e}get context(){return this._internals.context}set context(e){c.assert.object(e),this._merging?Object.assign(this._internals.context,e):this._internals.context=b({},e)}get hooks(){return this._internals.hooks}set hooks(e){c.assert.object(e);for(let r in e){if(!(r in this._internals.hooks))throw new Error(`Unexpected hook event: ${r}`);let n=r,i=e[n];if(c.assert.any([c.default.array,c.default.undefined],i),i)for(let o of i)c.assert.function_(o);if(this._merging)i&&this._internals.hooks[n].push(...i);else{if(!i)throw new Error(`Missing hook event: ${r}`);this._internals.hooks[r]=[...i]}}}get followRedirect(){return this._internals.followRedirect}set followRedirect(e){c.assert.boolean(e),this._internals.followRedirect=e}get followRedirects(){throw new TypeError("The `followRedirects` option does not exist. Use `followRedirect` instead.")}set followRedirects(e){throw new TypeError("The `followRedirects` option does not exist. Use `followRedirect` instead.")}get maxRedirects(){return this._internals.maxRedirects}set maxRedirects(e){c.assert.number(e),this._internals.maxRedirects=e}get cache(){return this._internals.cache}set cache(e){c.assert.any([c.default.object,c.default.string,c.default.boolean,c.default.undefined],e),e===!0?this._internals.cache=ah:e===!1?this._internals.cache=void 0:this._internals.cache=e}get throwHttpErrors(){return this._internals.throwHttpErrors}set throwHttpErrors(e){c.assert.boolean(e),this._internals.throwHttpErrors=e}get username(){let e=this._internals.url,r=e?e.username:this._internals.username;return decodeURIComponent(r)}set username(e){c.assert.string(e);let r=this._internals.url,n=encodeURIComponent(e);r?r.username=n:this._internals.username=n}get password(){let e=this._internals.url,r=e?e.password:this._internals.password;return decodeURIComponent(r)}set password(e){c.assert.string(e);let r=this._internals.url,n=encodeURIComponent(e);r?r.password=n:this._internals.password=n}get http2(){return this._internals.http2}set http2(e){c.assert.boolean(e),this._internals.http2=e}get allowGetBody(){return this._internals.allowGetBody}set allowGetBody(e){c.assert.boolean(e),this._internals.allowGetBody=e}get headers(){return this._internals.headers}set headers(e){c.assert.plainObject(e),this._merging?Object.assign(this._internals.headers,St(e)):this._internals.headers=St(e)}get methodRewriting(){return this._internals.methodRewriting}set methodRewriting(e){c.assert.boolean(e),this._internals.methodRewriting=e}get dnsLookupIpVersion(){return this._internals.dnsLookupIpVersion}set dnsLookupIpVersion(e){if(e!==void 0&&e!==4&&e!==6)throw new TypeError(`Invalid DNS lookup IP version: ${e}`);this._internals.dnsLookupIpVersion=e}get parseJson(){return this._internals.parseJson}set parseJson(e){c.assert.function_(e),this._internals.parseJson=e}get stringifyJson(){return this._internals.stringifyJson}set stringifyJson(e){c.assert.function_(e),this._internals.stringifyJson=e}get retry(){return this._internals.retry}set retry(e){if(c.assert.plainObject(e),c.assert.any([c.default.function_,c.default.undefined],e.calculateDelay),c.assert.any([c.default.number,c.default.undefined],e.maxRetryAfter),c.assert.any([c.default.number,c.default.undefined],e.limit),c.assert.any([c.default.array,c.default.undefined],e.methods),c.assert.any([c.default.array,c.default.undefined],e.statusCodes),c.assert.any([c.default.array,c.default.undefined],e.errorCodes),c.assert.any([c.default.number,c.default.undefined],e.noise),e.noise&&Math.abs(e.noise)>100)throw new Error(`The maximum acceptable retry noise is +/- 100ms, got ${e.noise}`);for(let n in e)if(!(n in this._internals.retry))throw new Error(`Unexpected retry option: ${n}`);this._merging?Object.assign(this._internals.retry,e):this._internals.retry=b({},e);let{retry:r}=this._internals;r.methods=[...new Set(r.methods.map(n=>n.toUpperCase()))],r.statusCodes=[...new Set(r.statusCodes)],r.errorCodes=[...new Set(r.errorCodes)]}get localAddress(){return this._internals.localAddress}set localAddress(e){c.assert.any([c.default.string,c.default.undefined],e),this._internals.localAddress=e}get method(){return this._internals.method}set method(e){c.assert.string(e),this._internals.method=e.toUpperCase()}get createConnection(){return this._internals.createConnection}set createConnection(e){c.assert.any([c.default.function_,c.default.undefined],e),this._internals.createConnection=e}get cacheOptions(){return this._internals.cacheOptions}set cacheOptions(e){c.assert.plainObject(e),c.assert.any([c.default.boolean,c.default.undefined],e.shared),c.assert.any([c.default.number,c.default.undefined],e.cacheHeuristic),c.assert.any([c.default.number,c.default.undefined],e.immutableMinTimeToLive),c.assert.any([c.default.boolean,c.default.undefined],e.ignoreCargoCult);for(let r in e)if(!(r in this._internals.cacheOptions))throw new Error(`Cache option \`${r}\` does not exist`);this._merging?Object.assign(this._internals.cacheOptions,e):this._internals.cacheOptions=b({},e)}get https(){return this._internals.https}set https(e){c.assert.plainObject(e),c.assert.any([c.default.boolean,c.default.undefined],e.rejectUnauthorized),c.assert.any([c.default.function_,c.default.undefined],e.checkServerIdentity),c.assert.any([c.default.string,c.default.object,c.default.array,c.default.undefined],e.certificateAuthority),c.assert.any([c.default.string,c.default.object,c.default.array,c.default.undefined],e.key),c.assert.any([c.default.string,c.default.object,c.default.array,c.default.undefined],e.certificate),c.assert.any([c.default.string,c.default.undefined],e.passphrase),c.assert.any([c.default.string,c.default.buffer,c.default.array,c.default.undefined],e.pfx),c.assert.any([c.default.array,c.default.undefined],e.alpnProtocols),c.assert.any([c.default.string,c.default.undefined],e.ciphers),c.assert.any([c.default.string,c.default.buffer,c.default.undefined],e.dhparam),c.assert.any([c.default.string,c.default.undefined],e.signatureAlgorithms),c.assert.any([c.default.string,c.default.undefined],e.minVersion),c.assert.any([c.default.string,c.default.undefined],e.maxVersion),c.assert.any([c.default.boolean,c.default.undefined],e.honorCipherOrder),c.assert.any([c.default.number,c.default.undefined],e.tlsSessionLifetime),c.assert.any([c.default.string,c.default.undefined],e.ecdhCurve),c.assert.any([c.default.string,c.default.buffer,c.default.array,c.default.undefined],e.certificateRevocationLists);for(let r in e)if(!(r in this._internals.https))throw new Error(`HTTPS option \`${r}\` does not exist`);this._merging?Object.assign(this._internals.https,e):this._internals.https=b({},e)}get encoding(){return this._internals.encoding}set encoding(e){if(e===null)throw new TypeError("To get a Buffer, set `options.responseType` to `buffer` instead");c.assert.any([c.default.string,c.default.undefined],e),this._internals.encoding=e}get resolveBodyOnly(){return this._internals.resolveBodyOnly}set resolveBodyOnly(e){c.assert.boolean(e),this._internals.resolveBodyOnly=e}get isStream(){return this._internals.isStream}set isStream(e){c.assert.boolean(e),this._internals.isStream=e}get responseType(){return this._internals.responseType}set responseType(e){if(e===void 0){this._internals.responseType="text";return}if(e!=="text"&&e!=="buffer"&&e!=="json")throw new Error(`Invalid \`responseType\` option: ${e}`);this._internals.responseType=e}get pagination(){return this._internals.pagination}set pagination(e){c.assert.object(e),this._merging?Object.assign(this._internals.pagination,e):this._internals.pagination=e}get auth(){throw new Error("Parameter `auth` is deprecated. Use `username` / `password` instead.")}set auth(e){throw new Error("Parameter `auth` is deprecated. Use `username` / `password` instead.")}get setHost(){return this._internals.setHost}set setHost(e){c.assert.boolean(e),this._internals.setHost=e}get maxHeaderSize(){return this._internals.maxHeaderSize}set maxHeaderSize(e){c.assert.any([c.default.number,c.default.undefined],e),this._internals.maxHeaderSize=e}toJSON(){return b({},this._internals)}[Symbol.for("nodejs.util.inspect.custom")](e,r){return(0,rt.inspect)(this._internals,r)}createNativeRequestOptions(){let e=this._internals,r=e.url,n;r.protocol==="https:"?n=e.http2?e.agent:e.agent.https:n=e.agent.http;let{https:s}=e,{pfx:i}=s;return c.default.array(i)&&c.default.plainObject(i[0])&&(i=i.map(o=>({buf:o.buffer,passphrase:o.passphrase}))),O(b(b({},e.cacheOptions),this._unixOptions),{ALPNProtocols:s.alpnProtocols,ca:s.certificateAuthority,cert:s.certificate,key:s.key,passphrase:s.passphrase,pfx:s.pfx,rejectUnauthorized:s.rejectUnauthorized,checkServerIdentity:s.checkServerIdentity??no.checkServerIdentity,ciphers:s.ciphers,honorCipherOrder:s.honorCipherOrder,minVersion:s.minVersion,maxVersion:s.maxVersion,sigalgs:s.signatureAlgorithms,sessionTimeout:s.tlsSessionLifetime,dhparam:s.dhparam,ecdhCurve:s.ecdhCurve,crl:s.certificateRevocationLists,lookup:e.dnsLookup??e.dnsCache?.lookup,family:e.dnsLookupIpVersion,agent:n,setHost:e.setHost,method:e.method,maxHeaderSize:e.maxHeaderSize,localAddress:e.localAddress,headers:e.headers,createConnection:e.createConnection,timeout:e.http2?dh(e):void 0,h2session:e.h2session})}getRequestFunction(){let e=this._internals.url,{request:r}=this._internals;return!r&&e?this.getFallbackRequestFunction():r}getFallbackRequestFunction(){let e=this._internals.url;if(!!e){if(e.protocol==="https:"){if(this._internals.http2){if(eo<15||eo===15&&ih<10){let r=new Error("To use the `http2` option, install Node.js 15.10.0 or above");throw r.code="EUNSUPPORTED",r}return ao.default.auto}return io.default.request}return so.default.request}}freeze(){let e=this._internals;Object.freeze(e),Object.freeze(e.hooks),Object.freeze(e.hooks.afterResponse),Object.freeze(e.hooks.beforeError),Object.freeze(e.hooks.beforeRedirect),Object.freeze(e.hooks.beforeRequest),Object.freeze(e.hooks.beforeRetry),Object.freeze(e.hooks.init),Object.freeze(e.https),Object.freeze(e.cacheOptions),Object.freeze(e.agent),Object.freeze(e.headers),Object.freeze(e.timeout),Object.freeze(e.retry),Object.freeze(e.retry.errorCodes),Object.freeze(e.retry.methods),Object.freeze(e.retry.statusCodes),Object.freeze(e.context)}};var nt=t=>{let{statusCode:e}=t,r=t.request.options.followRedirect?299:399;return e>=200&&e<=r||e===304},Kr=class extends H{constructor(e,r){let{options:n}=r.request;super(`${e.message} in "${n.url.toString()}"`,e,r.request);this.name="ParseError",this.code="ERR_BODY_PARSE_FAILURE"}},Qr=(t,e,r,n)=>{let{rawBody:s}=t;try{if(e==="text")return s.toString(n);if(e==="json")return s.length===0?"":r(s.toString());if(e==="buffer")return s}catch(i){throw new Kr(i,t)}throw new Kr({message:`Unknown body type '${e}'`,name:"Error"},t)};function lh(t){return t.writable&&!t.writableEnded}var co=lh;var ph=A.default.string(en.default.versions.brotli),mh=new Set(["GET","HEAD"]),Yr=new vt,yh=new Set([300,301,302,303,304,307,308]),gh=["socket","connect","continue","information","upgrade"],Xr=()=>{},he=class extends uo.Duplex{constructor(e,r,n){super({autoDestroy:!1,highWaterMark:0});Object.defineProperty(this,"constructor",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_noPipe",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"options",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"response",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"requestUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"redirectUrls",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"retryCount",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_stopRetry",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_downloadedSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_uploadedSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_stopReading",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_pipedServerResponses",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_request",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_responseSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_bodySize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_unproxyEvents",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_isFromCache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_cannotHaveBody",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_triggerRead",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_cancelTimeouts",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_nativeResponse",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_flushed",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_aborted",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_requestInitialized",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._downloadedSize=0,this._uploadedSize=0,this._stopReading=!1,this._pipedServerResponses=new Set,this._cannotHaveBody=!1,this._unproxyEvents=Xr,this._triggerRead=!1,this._cancelTimeouts=Xr,this._jobs=[],this._flushed=!1,this._requestInitialized=!1,this._aborted=!1,this.redirectUrls=[],this.retryCount=0,this._stopRetry=Xr;let s=()=>{this._unlockWrite()},i=()=>{this._lockWrite()};this.on("pipe",f=>{f.prependListener("data",s),f.on("data",i),f.prependListener("end",s),f.on("end",i)}),this.on("unpipe",f=>{f.off("data",s),f.off("data",i),f.off("end",s),f.off("end",i)}),this.on("pipe",f=>{f.headers&&Object.assign(this.options.headers,f.headers)}),this.on("newListener",f=>{if(f==="retry"&&this.listenerCount("retry")>0)throw new Error("A retry listener has been attached already.")});try{if(this.options=new F(e,r,n),!this.options.url){if(this.options.prefixUrl==="")throw new TypeError("Missing `url` property");this.options.url=""}this.requestUrl=this.options.url}catch(f){let{options:l}=f;l&&(this.options=l),this.flush=async()=>{this.flush=async()=>{},this.destroy(f)};return}let{json:o,body:a,form:h}=this.options;(o||a||h)&&this._lockWrite(),A.default.nodeStream(a)&&a.once("error",f=>{this._flushed?this._beforeError(new ft(f,this)):this.flush=async()=>{this.flush=async()=>{},this._beforeError(new ft(f,this))}})}async flush(){if(!this._flushed){this._flushed=!0;try{if(await this._finalizeBody(),this.destroyed)return;if(await this._makeRequest(),this.destroyed){this._request?.destroy();return}for(let e of this._jobs)e();this._jobs.length=0,this._requestInitialized=!0}catch(e){this._beforeError(e)}}}_beforeError(e){if(this._stopReading)return;let{response:r,options:n}=this,s=this.retryCount+(e.name==="RetryError"?0:1);this._stopReading=!0,e instanceof H||(e=new H(e.message,e,this));let i=e;(async()=>{if(r?.readable&&!r.rawBody&&!this._request?.socket?.destroyed&&(r.setEncoding(this.readableEncoding),await this._setRawBody(r)&&(r.body=r.rawBody.toString())),this.listenerCount("retry")!==0){let o;try{let a;r&&"retry-after"in r.headers&&(a=Number(r.headers["retry-after"]),Number.isNaN(a)?(a=Date.parse(r.headers["retry-after"])-Date.now(),a<=0&&(a=1)):a*=1e3);let h=n.retry;o=await h.calculateDelay({attemptCount:s,retryOptions:h,error:i,retryAfter:a,computedValue:Is({attemptCount:s,retryOptions:h,error:i,retryAfter:a,computedValue:h.maxRetryAfter??n.timeout.request??Number.POSITIVE_INFINITY})})}catch(a){this._error(new H(a.message,a,this));return}if(o){if(await new Promise(a=>{let h=setTimeout(a,o);this._stopRetry=()=>{clearTimeout(h),a()}}),this.destroyed)return;try{for(let a of this.options.hooks.beforeRetry)await a(i,this.retryCount+1)}catch(a){this._error(new H(a.message,e,this));return}if(this.destroyed)return;this.destroy(),this.emit("retry",this.retryCount+1,e,a=>{let h=new he(n.url,a,n);return h.retryCount=this.retryCount+1,en.default.nextTick(()=>{h.flush()}),h});return}}this._error(i)})()}_read(){this._triggerRead=!0;let{response:e}=this;if(e&&!this._stopReading){e.readableLength&&(this._triggerRead=!1);let r;for(;(r=e.read())!==null;){this._downloadedSize+=r.length;let n=this.downloadProgress;n.percent<1&&this.emit("downloadProgress",n),this.push(r)}}}_write(e,r,n){let s=()=>{this._writeRequest(e,r,n)};this._requestInitialized?s():this._jobs.push(s)}_final(e){let r=()=>{if(!this._request||this._request.destroyed){e();return}this._request.end(n=>{this._request._writableState?.errored||(n||(this._bodySize=this._uploadedSize,this.emit("uploadProgress",this.uploadProgress),this._request.emit("upload-complete")),e(n))})};this._requestInitialized?r():this._jobs.push(r)}_destroy(e,r){if(this._stopReading=!0,this.flush=async()=>{},this._stopRetry(),this._cancelTimeouts(),this.options){let{body:n}=this.options;A.default.nodeStream(n)&&n.destroy()}this._request&&this._request.destroy(),e!==null&&!A.default.undefined(e)&&!(e instanceof H)&&(e=new H(e.message,e,this)),r(e)}pipe(e,r){return e instanceof st.ServerResponse&&this._pipedServerResponses.add(e),super.pipe(e,r)}unpipe(e){return e instanceof st.ServerResponse&&this._pipedServerResponses.delete(e),super.unpipe(e),this}_lockWrite(){let e=()=>{throw new TypeError("The payload has been already provided")};this.write=e,this.end=e}_unlockWrite(){this.write=super.write,this.end=super.end}async _finalizeBody(){let{options:e}=this,{headers:r}=e,n=!A.default.undefined(e.form),s=!A.default.undefined(e.json),i=!A.default.undefined(e.body),o=mh.has(e.method)&&!(e.method==="GET"&&e.allowGetBody);if(this._cannotHaveBody=o,n||s||i){if(o)throw new TypeError(`The \`${e.method}\` method cannot be used with a body`);let a=!A.default.string(r["content-type"]);if(i){if(gt(e.body)){let f=new wr(e.body);a&&(r["content-type"]=f.headers["Content-Type"]),r["content-length"]=f.headers["Content-Length"],e.body=f.encode()}Je(e.body)&&a&&(r["content-type"]=`multipart/form-data; boundary=${e.body.getBoundary()}`)}else if(n){a&&(r["content-type"]="application/x-www-form-urlencoded");let{form:f}=e;e.form=void 0,e.body=new qt.URLSearchParams(f).toString()}else{a&&(r["content-type"]="application/json");let{json:f}=e;e.json=void 0,e.body=e.stringifyJson(f)}let h=await Sr(e.body,e.headers);A.default.undefined(r["content-length"])&&A.default.undefined(r["transfer-encoding"])&&!o&&!A.default.undefined(h)&&(r["content-length"]=String(h))}else o?this._lockWrite():this._unlockWrite();e.responseType==="json"&&!("accept"in e.headers)&&(e.headers.accept="application/json"),this._bodySize=Number(r["content-length"])||void 0}async _onResponseBase(e){if(this.isAborted)return;let{options:r}=this,{url:n}=r;this._nativeResponse=e,r.decompress&&(e=(0,ho.default)(e));let s=e.statusCode,i=e;i.statusMessage=i.statusMessage?i.statusMessage:st.default.STATUS_CODES[s],i.url=r.url.toString(),i.requestUrl=this.requestUrl,i.redirectUrls=this.redirectUrls,i.request=this,i.isFromCache=this._nativeResponse.fromCache??!1,i.ip=this.ip,i.retryCount=this.retryCount,this._isFromCache=i.isFromCache,this._responseSize=Number(e.headers["content-length"])||void 0,this.response=i,e.once("end",()=>{this._responseSize=this._downloadedSize,this.emit("downloadProgress",this.downloadProgress)}),e.once("error",a=>{this._aborted=!0,e.destroy(),this._beforeError(new dt(a,this))}),e.once("aborted",()=>{this._aborted=!0,this._beforeError(new dt({name:"Error",message:"The server aborted pending request",code:"ECONNRESET"},this))}),this.emit("downloadProgress",this.downloadProgress);let o=e.headers["set-cookie"];if(A.default.object(r.cookieJar)&&o){let a=o.map(async h=>r.cookieJar.setCookie(h,n.toString()));r.ignoreInvalidCookies&&(a=a.map(async h=>{try{await h}catch{}}));try{await Promise.all(a)}catch(h){this._beforeError(h);return}}if(!this.isAborted){if(r.followRedirect&&e.headers.location&&yh.has(s)){if(e.resume(),this._cancelTimeouts(),this._unproxyEvents(),this.redirectUrls.length>=r.maxRedirects){this._beforeError(new Yt(this));return}this._request=void 0;let a=new F(void 0,void 0,this.options);(s===303&&a.method!=="GET"&&a.method!=="HEAD"||a.methodRewriting)&&(a.method="GET",a.body=void 0,a.json=void 0,a.form=void 0,delete a.headers["content-length"]);try{let f=At.Buffer.from(e.headers.location,"binary").toString(),l=new qt.URL(f,n);l.hostname!==n.hostname||l.port!==n.port?("host"in a.headers&&delete a.headers.host,"cookie"in a.headers&&delete a.headers.cookie,"authorization"in a.headers&&delete a.headers.authorization,(a.username||a.password)&&(a.username="",a.password="")):(l.username=a.username,l.password=a.password),this.redirectUrls.push(l),a.prefixUrl="",a.url=l;for(let m of a.hooks.beforeRedirect)await m(a,i);this.emit("redirect",a,i),this.options=a,await this._makeRequest()}catch(f){this._beforeError(f);return}return}if(r.isStream&&r.throwHttpErrors&&!nt(i)){this._beforeError(new ve(i));return}if(e.on("readable",()=>{this._triggerRead&&this._read()}),this.on("resume",()=>{e.resume()}),this.on("pause",()=>{e.pause()}),e.once("end",()=>{this.push(null)}),this._noPipe){await this._setRawBody()&&this.emit("response",e);return}this.emit("response",e);for(let a of this._pipedServerResponses)if(!a.headersSent){for(let h in e.headers){let f=r.decompress?h!=="content-encoding":!0,l=e.headers[h];f&&a.setHeader(h,l)}a.statusCode=s}}}async _setRawBody(e=this){if(e.readableEnded)return!1;try{let r=await(0,fo.buffer)(e);if(!this.isAborted)return this.response.rawBody=r,!0}catch{}return!1}async _onResponse(e){try{await this._onResponseBase(e)}catch(r){this._beforeError(r)}}_onRequest(e){let{options:r}=this,{timeout:n,url:s}=r;Bn(e),this.options.http2&&e.setTimeout(0),this._cancelTimeouts=Cr(e,n,s);let i=r.cache?"cacheableResponse":"response";e.once(i,o=>{this._onResponse(o)}),e.once("error",o=>{this._aborted=!0,e.destroy(),o=o instanceof Et?new Zt(o,this.timings,this):new H(o.message,o,this),this._beforeError(o)}),this._unproxyEvents=Ke(e,this,gh),this._request=e,this.emit("uploadProgress",this.uploadProgress),this._sendBody(),this.emit("request",e)}async _asyncWrite(e){return new Promise((r,n)=>{super.write(e,s=>{if(s){n(s);return}r()})})}_sendBody(){let{body:e}=this.options,r=this.redirectUrls.length===0?this:this._request??this;A.default.nodeStream(e)?e.pipe(r):A.default.generator(e)||A.default.asyncGenerator(e)?(async()=>{try{for await(let n of e)await this._asyncWrite(n);super.end()}catch(n){this._beforeError(n)}})():(this._unlockWrite(),A.default.undefined(e)?(this._cannotHaveBody||this._noPipe)&&(r.end(),this._lockWrite()):(this._writeRequest(e,void 0,()=>{}),r.end(),this._lockWrite()))}_prepareCache(e){Yr.has(e)||Yr.set(e,new Zr.default((r,n)=>{let s=r._request(r,n);return A.default.promise(s)&&(s.once=(i,o)=>{if(i==="error")(async()=>{try{await s}catch(a){o(a)}})();else if(i==="abort")(async()=>{try{(await s).once("abort",o)}catch{}})();else throw new Error(`Unknown HTTP2 promise event: ${i}`);return s}),s},e))}async _createCacheableRequest(e,r){return new Promise((n,s)=>{Object.assign(r,Rr(e));let i,o=Yr.get(r.cache)(r,async a=>{if(a._readableState.autoDestroy=!1,i){let h=()=>{a.req&&(a.complete=a.req.res.complete)};a.prependOnceListener("end",h),h(),(await i).emit("cacheableResponse",a)}n(a)});o.once("error",s),o.once("request",async a=>{i=a,n(i)})})}async _makeRequest(){let{options:e}=this,{headers:r,username:n,password:s}=e,i=e.cookieJar;for(let f in r)if(A.default.undefined(r[f]))delete r[f];else if(A.default.null_(r[f]))throw new TypeError(`Use \`undefined\` instead of \`null\` to delete the \`${f}\` header`);if(e.decompress&&A.default.undefined(r["accept-encoding"])&&(r["accept-encoding"]=ph?"gzip, deflate, br":"gzip, deflate"),n||s){let f=At.Buffer.from(`${n}:${s}`).toString("base64");r.authorization=`Basic ${f}`}if(i){let f=await i.getCookieString(e.url.toString());A.default.nonEmptyString(f)&&(r.cookie=f)}e.prefixUrl="";let o;for(let f of e.hooks.beforeRequest){let l=await f(e);if(!A.default.undefined(l)){o=()=>l;break}}o||(o=e.getRequestFunction());let a=e.url;this._requestOptions=e.createNativeRequestOptions(),e.cache&&(this._requestOptions._request=o,this._requestOptions.cache=e.cache,this._prepareCache(e.cache));let h=e.cache?this._createCacheableRequest:o;try{let f=h(a,this._requestOptions);A.default.promise(f)&&(f=await f),A.default.undefined(f)&&(f=e.getFallbackRequestFunction()(a,this._requestOptions),A.default.promise(f)&&(f=await f)),co(f)?this._onRequest(f):this.writable?(this.once("finish",()=>{this._onResponse(f)}),this._sendBody()):this._onResponse(f)}catch(f){throw f instanceof Zr.default.CacheError?new Xt(f,this):f}}async _error(e){try{for(let r of this.options.hooks.beforeError)e=await r(e)}catch(r){e=new H(r.message,r,this)}this.destroy(e)}_writeRequest(e,r,n){!this._request||this._request.destroyed||this._request.write(e,r,s=>{if(!s){this._uploadedSize+=At.Buffer.byteLength(e,r);let i=this.uploadProgress;i.percent<1&&this.emit("uploadProgress",i)}n(s)})}get ip(){return this.socket?.remoteAddress}get isAborted(){return this._aborted}get socket(){return this._request?.socket??void 0}get downloadProgress(){let e;return this._responseSize?e=this._downloadedSize/this._responseSize:this._responseSize===this._downloadedSize?e=1:e=0,{percent:e,transferred:this._downloadedSize,total:this._responseSize}}get uploadProgress(){let e;return this._bodySize?e=this._uploadedSize/this._bodySize:this._bodySize===this._uploadedSize?e=1:e=0,{percent:e,transferred:this._uploadedSize,total:this._bodySize}}get timings(){return this._request?.timings}get isFromCache(){return this._isFromCache}get reusedSocket(){return this._request?.reusedSocket}};var tn=class extends H{constructor(e){super("Promise was canceled",{},e);this.name="CancelError",this.code="ERR_CANCELED"}get isCanceled(){return!0}};var _h=["request","response","redirect","uploadProgress","downloadProgress"];function jt(t){let e,r,n,s=new lo.EventEmitter,i=new le((a,h,f)=>{f(()=>{e.destroy()}),f.shouldReject=!1,f(()=>{h(new tn(e))});let l=m=>{f(()=>{});let p=t??new he(void 0,void 0,n);p.retryCount=m,p._noPipe=!0,e=p,p.once("response",async d=>{let y=(d.headers["content-encoding"]??"").toLowerCase(),_=y==="gzip"||y==="deflate"||y==="br",{options:x}=p;if(_&&!x.decompress)d.body=d.rawBody;else try{d.body=Qr(d,x.responseType,x.parseJson,x.encoding)}catch(E){if(d.body=d.rawBody.toString(),nt(d)){p._beforeError(E);return}}try{let E=x.hooks.afterResponse;for(let[T,k]of E.entries())if(d=await k(d,async L=>{throw x.merge(L),x.prefixUrl="",L.url&&(x.url=L.url),x.hooks.afterResponse=x.hooks.afterResponse.slice(0,T),new er(p)}),!(Te.default.object(d)&&Te.default.number(d.statusCode)&&!Te.default.nullOrUndefined(d.body)))throw new TypeError("The `afterResponse` hook returned an invalid value")}catch(E){p._beforeError(E);return}if(r=d,!nt(d)){p._beforeError(new ve(d));return}p.destroy(),a(p.options.resolveBodyOnly?d.body:d)});let w=d=>{if(i.isCanceled)return;let{options:y}=p;if(d instanceof ve&&!y.throwHttpErrors){let{response:_}=d;p.destroy(),a(p.options.resolveBodyOnly?_.body:_);return}h(d)};p.once("error",w);let S=p.options?.body;p.once("retry",(d,y)=>{t=void 0;let _=p.options.body;if(S===_&&Te.default.nodeStream(_)){y.message="Cannot retry with consumed body stream",w(y);return}n=p.options,l(d)}),Ke(p,s,_h),Te.default.undefined(t)&&p.flush()};l(0)});i.on=(a,h)=>(s.on(a,h),i);let o=a=>{let h=(async()=>{await i;let{options:f}=r.request;return Qr(r,a,f.parseJson,f.encoding)})();return Object.defineProperties(h,Object.getOwnPropertyDescriptors(i)),h};return i.json=()=>{if(e.options){let{headers:a}=e.options;!e.writableFinished&&!("accept"in a)&&(a.accept="application/json")}return o("json")},i.buffer=()=>o("buffer"),i.text=()=>o("text"),i}var bh=async t=>new Promise(e=>{setTimeout(e,t)}),wh=t=>M.default.function_(t),Eh=["get","post","put","patch","head","delete"],po=t=>{t={options:new F(void 0,void 0,t.options),handlers:[...t.handlers],mutableDefaults:t.mutableDefaults},Object.defineProperty(t,"mutableDefaults",{enumerable:!0,configurable:!1,writable:!1});let e=(n,s,i=t.options)=>{let o=new he(n,s,i),a,h=m=>(o.options=m,o._noPipe=!m.isStream,o.flush(),m.isStream?o:(a||(a=jt(o)),a)),f=0,l=m=>{let w=(t.handlers[f++]??h)(m,l);if(M.default.promise(w)&&!o.options.isStream&&(a||(a=jt(o)),w!==a)){let S=Object.getOwnPropertyDescriptors(a);for(let d in S)d in w&&delete S[d];Object.defineProperties(w,S),w.cancel=a.cancel}return w};return l(o.options)};e.extend=(...n)=>{let s=new F(void 0,void 0,t.options),i=[...t.handlers],o;for(let a of n)wh(a)?(s.merge(a.defaults.options),i.push(...a.defaults.handlers),o=a.defaults.mutableDefaults):(s.merge(a),a.handlers&&i.push(...a.handlers),o=a.mutableDefaults);return po({options:s,handlers:i,mutableDefaults:Boolean(o)})};let r=async function*(n,s){let i=new F(n,s,t.options);i.resolveBodyOnly=!1;let{pagination:o}=i;M.assert.function_(o.transform),M.assert.function_(o.shouldContinue),M.assert.function_(o.filter),M.assert.function_(o.paginate),M.assert.number(o.countLimit),M.assert.number(o.requestLimit),M.assert.number(o.backoff);let a=[],{countLimit:h}=o,f=0;for(;f<o.requestLimit;){f!==0&&await bh(o.backoff);let l=await e(void 0,void 0,i),m=await o.transform(l),p=[];M.assert.array(m);for(let S of m)if(o.filter({item:S,currentItems:p,allItems:a})&&(!o.shouldContinue({item:S,currentItems:p,allItems:a})||(yield S,o.stackAllItems&&a.push(S),p.push(S),--h<=0)))return;let w=o.paginate({response:l,currentItems:p,allItems:a});if(w===!1)return;w===l.request.options?i=l.request.options:(i.merge(w),M.assert.any([M.default.urlInstance,M.default.undefined],w.url),w.url!==void 0&&(i.prefixUrl="",i.url=w.url)),f++}};e.paginate=r,e.paginate.all=async(n,s)=>{let i=[];for await(let o of r(n,s))i.push(o);return i},e.paginate.each=r,e.stream=(n,s)=>e(n,O(b({},s),{isStream:!0}));for(let n of Eh)e[n]=(s,i)=>e(s,O(b({},i),{method:n})),e.stream[n]=(s,i)=>e(s,O(b({},i),{method:n,isStream:!0}));return t.mutableDefaults||(Object.freeze(t.handlers),t.options.freeze()),Object.defineProperty(e,"defaults",{value:t,writable:!1,configurable:!1,enumerable:!0}),e},mo=po;var vh={options:new F,handlers:[],mutableDefaults:!1},Sh=mo(vh),yo=Sh;var _o=(0,go.getPreferenceValues)(),bo=_o.consumerKey,wo=_o.accessToken,Eo=yo.extend({prefixUrl:"https://getpocket.com"});function xh(t){return{id:t.item_id,title:t.resolved_title||t.given_title,originalUrl:t.resolved_url||t.given_url,pocketUrl:`https://getpocket.com/read/${t.item_id}`,type:t.is_article==="0"?"video":"article",favorite:t.favorite==="1",tags:t.tags?Object.keys(t.tags):[],author:t.authors?Object.values(t.authors)[0]?.name:"",updatedAt:new Date(parseInt(`${t.time_added}000`))}}async function Ht({id:t,action:e}){await Eo.post("v3/send",{json:{consumer_key:bo,access_token:wo,actions:[{action:e,item_id:t,time:Math.floor(new Date().getTime()/1e3)}]}})}async function vo({state:t,count:e}){let r=await Eo.post("v3/get",{json:{consumer_key:bo,access_token:wo,detailType:"complete",sort:"newest",count:e,state:t}}),n=JSON.parse(r.body);return Object.values(n.list).map(xh).sort((i,o)=>o.updatedAt.getTime()-i.updatedAt.getTime())}var V=require("@raycast/api"),So=require("react");function xo({readState:t}){let{data:e,error:r,isValidating:n,mutate:s}=On(["v3/get",t],async(h,f)=>vo({state:f}));(0,So.useEffect)(()=>{if(r)if(r.response.statusCode===401||r.response.statusCode===403)(0,V.showToast)(V.Toast.Style.Failure,"Invalid Credentials","Check you Pocket extension preferences");else throw r},[r]);async function i(h){let f=e?.find(m=>m.id===h),l=new V.Toast({title:f?.favorite?"Removing from favorites":"Adding to favorites",style:V.Toast.Style.Animated});l.show(),await Ht({id:h,action:f?.favorite?"unfavorite":"favorite"}),await s(),l.title=f?.favorite?"Removed from favorites":"Added to favorites",l.style=V.Toast.Style.Success,l.message=f?.title}async function o(h){let f=e?.find(m=>m.id===h),l=new V.Toast({title:"Deleting bookmark",style:V.Toast.Style.Animated});l.show(),await Ht({id:h,action:"delete"}),await s(),l.title="Deleted successfully",l.style=V.Toast.Style.Success,l.message=f?.title}async function a(h){let f=e?.find(m=>m.id===h),l=new V.Toast({title:"Archiving bookmark",style:V.Toast.Style.Animated});l.show(),await Ht({id:h,action:"archive"}),await s(),l.title="Archived successfully",l.style=V.Toast.Style.Success,l.message=f?.title}return{bookmarks:e||[],loading:!e&&!r||n,refreshBookmarks:s,toggleFavorite:i,deleteBookmark:o,archiveBookmark:a}}var To=require("react");var Co=(0,C.getPreferenceValues)();function Ro(){let[t,e]=(0,To.useState)(Co.defaultFilter),{bookmarks:r,loading:n,toggleFavorite:s,refreshBookmarks:i,archiveBookmark:o,deleteBookmark:a}=xo({readState:t});return _jsx(C.List,{throttle:!0,isLoading:n,searchBarPlaceholder:"Filter bookmarks by title...",searchBarAccessory:_jsx(C.List.Dropdown,{storeValue:!0,defaultValue:t,onChange:h=>e(h),tooltip:"Filter Bookmarks"},_jsx(C.List.Dropdown.Item,{title:"All Bookmarks",value:"all"}),_jsx(C.List.Dropdown.Item,{title:"Unread",value:"unread"}),_jsx(C.List.Dropdown.Item,{title:"Archived",value:"archive"}))},r.map(h=>_jsx(C.List.Item,{key:h.id,title:h.title,icon:h.type==="article"?C.Icon.TextDocument:C.Icon.Video,subtitle:h.author,accessoryTitle:h.updatedAt.toDateString().replace(/^\w+\s/,""),accessoryIcon:h.favorite?{source:C.Icon.Star,tintColor:C.Color.Yellow}:void 0,actions:_jsx(C.ActionPanel,{title:h.title},Co.defaultOpen==="pocket-website"?_jsx(C.ActionPanel.Section,null,_jsx(C.Action.OpenInBrowser,{title:"Open in Pocket",icon:"pocket-logo.png",url:h.pocketUrl}),_jsx(C.Action.OpenInBrowser,{title:"Open in Browser",url:h.originalUrl})):_jsx(C.ActionPanel.Section,null,_jsx(C.Action.OpenInBrowser,{title:"Open in Browser",url:h.originalUrl}),_jsx(C.Action.OpenInBrowser,{title:"Open in Pocket",icon:"pocket-logo.png",url:h.pocketUrl})),_jsx(C.ActionPanel.Section,null,_jsx(C.Action,{title:"Archive Bookmark",shortcut:{modifiers:["cmd"],key:"a"},icon:C.Icon.Checkmark,onAction:()=>o(h.id)}),_jsx(C.Action,{title:`${h.favorite?"Unmark":"Mark"} as Favorite`,shortcut:{modifiers:["cmd"],key:"f"},icon:C.Icon.Star,onAction:()=>s(h.id)}),_jsx(C.Action,{title:"Delete Bookmark",shortcut:{modifiers:["cmd"],key:"d"},icon:{source:C.Icon.Trash,tintColor:C.Color.Red},onAction:()=>a(h.id)})),_jsx(C.ActionPanel.Section,null,_jsx(C.Action.CopyToClipboard,{title:"Copy Bookmark Title",shortcut:{modifiers:["cmd"],key:"."},content:h.title}),_jsx(C.Action.CopyToClipboard,{title:"Copy Bookmark URL",shortcut:{modifiers:["cmd","shift"],key:","},content:h.originalUrl}),_jsx(C.Action.CopyToClipboard,{title:"Copy Pocket Bookmark URL",shortcut:{modifiers:["cmd","shift"],key:"."},content:h.pocketUrl}),h.author?_jsx(C.Action.CopyToClipboard,{title:"Copy Bookmark Author",shortcut:{modifiers:["ctrl","shift"],key:","},content:h.author}):null),_jsx(C.ActionPanel.Section,null,_jsx(C.Action,{title:"Refresh",icon:C.Icon.ArrowClockwise,shortcut:{modifiers:["cmd"],key:"r"},onAction:()=>i()})))})))}module.exports=No(Ch);0&&(module.exports={});
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
